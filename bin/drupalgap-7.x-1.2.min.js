var drupalgap=drupalgap||drupalgap_init(),_dg_GET=_dg_GET||{};
function drupalgap_init(){return{modules:{core:[{name:"comment"},{name:"contact"},{name:"entity"},{name:"field"},{name:"file"},{name:"image"},{name:"menu"},{name:"mvc"},{name:"node"},{name:"search"},{name:"system"},{name:"taxonomy"},{name:"user"},{name:"views"}]},module_paths:[],includes:[{name:"block"},{name:"common"},{name:"form"},{name:"go"},{name:"menu"},{name:"page"},{name:"region"},{name:"theme"},{name:"title"}],online:!1,destination:"",api:{},back:!1,back_path:[],blocks:[],content_types_list:{},
date_formats:{},date_types:{},entity_info:{},field_info_fields:{},field_info_instances:{},field_info_extra_fields:{},form_errors:{},form_states:[],loading:!1,loader:"loading",locale:{},messages:[],menus:{},menu_links:{},menu_router:{},mvc:{models:{},views:{},controllers:{}},output:"",page:{jqm_events:[],title:"",variables:{},process:!0,options:{}},pages:[],path:"",remote_addr:null,router_path:"",services:{},sessid:null,settings:{},site_settings:{},taxonomy_vocabularies:!1,theme_path:"",themes:[],
theme_registry:{},views:{ids:[]},views_datasource:{}}}
function drupalgap_onload(){try{window.location.hash="";for(var a="drupalgap block comment contact entity field file image menu mvc node search system taxonomy user views".split(" "),b=0;b<a.length;b++){var c=a[b];Drupal.modules.core[c]=module_object_template(c)}"undefined"===typeof drupalgap.settings.mode&&(drupalgap.settings.mode="phonegap");switch(drupalgap.settings.mode){case "phonegap":document.addEventListener("deviceready",_drupalgap_deviceready,!1);break;case "web-app":_drupalgap_deviceready();
break;default:console.log("drupalgap_onload - unknown mode ("+drupalgap.settings.mode+")")}}catch(d){console.log("drupalgap_onload - "+d)}}
function _drupalgap_deviceready(){try{if(drupalgap_bootstrap(),Drupal.settings.site_path&&""!=Drupal.settings.site_path)if(drupalgap_check_connection(),drupalgap.online){var a=!0,b=module_invoke_all("deviceready");if(b&&0<b.length)for(var c=0;c<b.length;c++)if(!b[c]){a=!1;break}a&&system_connect(_drupalgap_deviceready_options())}else module_invoke_all("device_offline"),drupalgap.settings.offline_message?drupalgap_alert(drupalgap.settings.offline_message,{title:t("Offline"),alertCallback:function(){drupalgap_goto("offline")}}):
drupalgap_goto("offline");else a=t("No site_path to Drupal set in the app/settings.js file!"),drupalgap_alert(a,{title:t("Error")})}catch(d){console.log("_drupalgap_deviceready - "+d)}}
function _drupalgap_deviceready_options(a){var b=a?a:{};return{success:function(a){module_invoke_all("device_connected");drupalgap_goto("",b)},error:function(a,b,e){a=t("Failed connection to")+" "+drupalgap.settings.site_path;""!=e&&(a+=" - "+e);a+=" - "+t("Check your device's connection and check that")+" "+Drupal.settings.site_path+" "+t("is online.");drupalgap_alert(a,{title:t("Unable to Connect"),alertCallback:function(){drupalgap_goto("offline")}})}}}
function drupalgap_bootstrap(){try{drupalgap_load_modules(),drupalgap_load_theme(),drupalgap_load_blocks(),drupalgap_load_locales(),menu_router_build(),drupalgap_menus_load(),drupalgap_theme_registry_build(),document.addEventListener("backbutton",drupalgap_back,!1)}catch(a){console.log("drupalgap_bootstrap - "+a)}}
function drupalgap_load_modules(){try{var a=["contrib","custom"],b;for(b in a)if(a.hasOwnProperty(b)){var c=a[b];if(drupalgap.modules&&drupalgap.modules[c]&&0!=drupalgap.modules[c].length)for(b in drupalgap.modules[c])if(drupalgap.modules[c].hasOwnProperty(b)){var d=drupalgap.modules[c][b];d.name&&(console.log('WARNING: The module "'+d.name+"\" defined in settings.js needs to be added to Drupal.modules['"+c+"'] instead! See default.settings.js for examples on the new syntax!"),Drupal.modules[c][d.name]=
d)}for(var e in Drupal.modules[c])if(Drupal.modules[c].hasOwnProperty(e)){d=Drupal.modules[c][e];$.isEmptyObject(d)&&(Drupal.modules[c][e]=module_object_template(e),d=Drupal.modules[c][e]);d.name||(Drupal.modules[c][e].name=e,d=Drupal.modules[c][e]);module_base_path=drupalgap_modules_get_bundle_directory(c)+"/"+d.name;module_path=module_base_path+"/"+d.name+".js";modules_paths=[module_path];if(null!=d.includes&&0!=d.includes.length)for(var f in d.includes)d.includes.hasOwnProperty(f)&&modules_paths.push(module_base_path+
"/"+d.includes[f].name+".js");for(var g in modules_paths)if(modules_paths.hasOwnProperty(g)){var h=modules_paths[g];jQuery.ajax({async:!1,type:"GET",url:h,data:null,success:function(){Drupal.settings.debug&&dpm(h)},dataType:"script",error:function(a,b,c){a=t("Failed to load module!")+" ("+d.name+")";dpm(a);console.log(h);dpm(b);dpm(c.message);drupalgap_alert(a)}})}}}module_invoke_all("install")}catch(k){console.log("drupalgap_load_modules - "+k)}}
function drupalgap_load_theme(){try{if(drupalgap.settings.theme){var a=drupalgap.settings.theme,b="themes/"+a+"/"+a+".js";"easystreet3"!=a&&"ava"!=a&&(b="app/themes/"+a+"/"+a+".js");if(!drupalgap_file_exists(b)){var c="drupalgap_theme_load - "+t("Failed to load theme!")+" "+t("The theme's JS file does not exist")+": "+b;drupalgap_alert(c);return!1}drupalgap_add_js(b);var d=a+"_info";if(drupalgap_function_exists(d)){drupalgap.theme=(0,window[d])();for(var e in drupalgap.theme.regions)if(drupalgap.theme.regions.hasOwnProperty(e)){var f=
drupalgap.theme.regions[e];drupalgap.theme.regions[e].name=e}for(var g=system_regions_list(),c=0;c<g.length;c++)f=g[c],"undefined"===typeof drupalgap.theme.regions[f]&&console.log('WARNING: drupalgap_load_theme() - The "'+a+'" theme does not have the "'+f+'" region specified in "'+a+'_info()."');drupalgap.theme_path=b.replace("/"+a+".js","");return!0}c="drupalgap_load_theme() - "+t("failed")+" - "+d+"() "+t("does not exist!");drupalgap_alert(c)}else b="drupalgap_load_theme - "+t("no theme specified in settings.js"),
drupalgap_alert(b);return!1}catch(h){console.log("drupalgap_load_theme - "+h)}}function drupalgap_add_js(a){try{var b;a&&(b=a);jQuery.ajax({async:!1,type:"GET",url:b,data:null,success:function(){Drupal.settings.debug&&console.log(b)},dataType:"script",error:function(a,c,f){console.log("drupalgap_add_js - error - ("+b+" : "+c+") "+f)}})}catch(c){console.log("drupalgap_add_js - "+c)}}
function drupalgap_add_css(a){try{var b;a&&(b=a);$("<link/>",{rel:"stylesheet",href:b}).appendTo("head")}catch(c){console.log("drupalgap_add_css - "+c)}}
function drupalgap_alert(a,b){try{var c=null;b&&(c=b);var d=function(){},e=t("Alert"),f=t("OK");c&&(c.alertCallback&&(d=c.alertCallback),c.title&&(e=c.title),c.buttonName&&(f=c.buttonName));"phonegap"!=drupalgap.settings.mode||"undefined"===typeof navigator.notification?(alert(a),d()):navigator.notification.alert(a,d,e,f)}catch(g){console.log("drupalgap_alert - "+g)}}
function drupalgap_confirm(a,b){try{var c=null;b&&(c=b);var d=function(a){},e=t("Confirm"),f=[t("OK"),t("Cancel")];c&&(c.confirmCallback&&(d=c.confirmCallback),c.title&&(e=c.title),c.buttonLabels&&(f=c.buttonLabels));"function"===typeof parent.window.ripple||"web-app"==drupalgap.settings.mode?1==confirm(a)?d(1):d(2):navigator.notification.confirm(a,d,e,f);return!1}catch(g){console.log("drupalgap_confirm - "+g)}}
function drupalgap_toast(a,b,c){try{var d=b?b:1500;setTimeout(function(){$.mobile.loading("show",{textVisible:!0,html:a});setTimeout(function(){$.mobile.loading().hide()},d)},c?c:750)}catch(e){console.log("drupalgap_toast - "+e)}}function drupalgap_load_blocks(){try{drupalgap.blocks=module_invoke_all("block_info")}catch(a){console.log("drupalgap_load_blocks - "+a)}}
function drupalgap_load_locales(){try{if("undefined"!==typeof drupalgap.settings.locale){for(var a in drupalgap.settings.locale)if(drupalgap.settings.locale.hasOwnProperty(a)){var b="locale/"+a+".json";drupalgap_file_exists(b)&&(drupalgap.locale[a]=drupalgap_file_get_contents(b,{dataType:"json"}))}for(var c=module_implements("locale"),d=0;d<c.length;d++)for(var e=c[d],f=(0,window[e+"_locale"])(),g=0;g<f.length;g++){a=f[d];var b=drupalgap_get_path("module",e)+"/locale/"+a+".json",h=drupalgap_file_get_contents(b,
{dataType:"json"});"undefined"===typeof drupalgap.locale[a]?drupalgap.locale[a]=h:$.extend(drupalgap.locale[a],drupalgap.locale[a],h)}}}catch(k){console.log("drupalgap_load_locales - "+k)}}
function drupalgap_check_connection(){try{if("phonegap"!=drupalgap.settings.mode||"function"===typeof parent.window.ripple)return drupalgap.online=!0,"Ethernet connection";var a=navigator.connection.type,b={};b[Connection.UNKNOWN]="Unknown connection";b[Connection.ETHERNET]="Ethernet connection";b[Connection.WIFI]="WiFi connection";b[Connection.CELL_2G]="Cell 2G connection";b[Connection.CELL_3G]="Cell 3G connection";b[Connection.CELL_4G]="Cell 4G connection";b[Connection.NONE]="No network connection";
drupalgap.online="No network connection"==b[a]?!1:!0;return b[a]}catch(c){console.log("drupalgap_check_connection - "+c)}}function drupalgap_empty(a){try{return console.log("WARNING: drupalgap_empty() is deprecated! Use empty() instead."),empty(a)}catch(b){console.log("drupalgap_empty - "+b)}}function drupalgap_file_exists(a){try{var b=!1;jQuery.ajax({async:!1,type:"HEAD",url:a,success:function(){b=!0},error:function(a,b,c){}});return b}catch(c){console.log("drupalgap_file_exists - "+c)}}
function drupalgap_file_get_contents(a,b){try{var c=!1,d={type:"GET",url:a,dataType:"html",data:null,async:!1,success:function(a){c=a},error:function(b,c,d){console.log("drupalgap_file_get_contents - failed to load file ("+a+")")}};$.extend(d,b);jQuery.ajax(d);return c}catch(e){console.log("drupalgap_file_get_contents - "+e)}}
function drupalgap_format_interval(a,b,c){try{c=2;b&&(c=b);b={"1 year|@count years":31536E3,"1 month|@count months":2592E3,"1 week|@count weeks":604800,"1 day|@count days":86400,"1 hour|@count hours":3600,"1 min|@count min":60,"1 sec|@count sec":1};var d="",e;for(e in b)if(b.hasOwnProperty(e)){var f=b[e];e=e.split("|");if(a>=f){var g=Math.floor(a/f),d=d+((d?" ":"")+drupalgap_format_plural(g,e[0],e[1]));-1!=d.indexOf("@count")&&(d=d.replace("@count",g));a%=f;c--}if(0==c)break}return d?d:"0 sec"}catch(h){console.log("drupalgap_format_interval - "+
h)}}function drupalgap_format_plural(a,b,c){return 1==a?b:c}function drupalgap_function_exists(a){try{return function_exists(a)}catch(b){console.log("drupalgap_function_exists - "+b)}}function drupalgap_get_placeholders_from_html(a){try{var b=!1;a&&(b=a.match(/(?!{:)([\w]+)(?=:})/g));return b}catch(c){console.log("drupalgap_get_placeholders_from_html - "+c)}}function drupalgap_get_title(){try{return drupalgap.page.title}catch(a){console.log("drupalgap_get_title - "+a)}}
function drupalgap_get_ip(){try{return drupalgap.remote_addr}catch(a){console.log("drupalgap_get_ip - "+a)}}function drupalgap_get_wildcards_from_router_path(a){return!1}
function drupalgap_image_path(a){try{var b=!1,c=module_implements("image_path_alter");if(c)for(var d in c)if(c.hasOwnProperty(d)){var e=module_invoke(c[d],"image_path_alter",a);if(e){b=!0;a=e;break}}if(b)return a;var f=Drupal.settings.site_path+Drupal.settings.base_path+a;-1!=f.indexOf("public://")?f=f.replace("public://",Drupal.settings.file_public_path+"/"):-1!=f.indexOf("private://")&&(f=f.replace("private://",Drupal.settings.file_private_path+"/"));return f}catch(g){console.log("drupalgap_image_path - "+
g)}}function drupalgap_includes_load(){try{if(null!=drupalgap.includes&&0!=drupalgap.includes.length)for(var a in drupalgap.includes)if(drupalgap.includes.hasOwnProperty(a)){var b="includes/"+drupalgap.includes[a].name+".inc.js";jQuery.ajax({async:!1,type:"GET",url:b,data:null,success:function(){Drupal.settings.debug&&dpm(b)},dataType:"script",error:function(a,b,c){console.log(c)}})}}catch(c){console.log("drupalgap_includes_load - "+c)}}
function drupalgap_item_list_populate(a,b){try{$(a).html("");for(var c=0;c<b.length;c++)$(a).append($("<li></li>",{html:b[c]}));$(a).listview("refresh").listview()}catch(d){console.log("drupalgap_item_list_populate - "+d)}}function drupalgap_table_populate(a,b){try{a+="> tbody ";$(a).html("");for(var c=0;c<b.length;c++){for(var d=b[c],e="",f=0;f<d.length;f++)e=e+"<td>"+d[f]+"</td>";$("<tr>").html(e).appendTo($(a))}$(a).rebuild()}catch(g){console.log("drupalgap_table_populate - "+g)}}
function drupalgap_jqm_page_event_fire(a,b,c,d){try{if(a=a+"-"+b,"undefined"!==typeof d&&d&&(a+="-"+d),-1==$.inArray(a,drupalgap.page.jqm_events)&&drupalgap_function_exists(b)){drupalgap.page.jqm_events.push(a);var e=window[b];c?($.isArray(c)||(c=[c]),e.apply(null,Array.prototype.slice.call(c))):e()}}catch(f){console.log("drupalgap_jqm_page_event_fire - "+f)}}
function drupalgap_jqm_page_events(){return"pagebeforechange pagebeforecreate pagebeforehide pagebeforeload pagebeforeshow pagechange pagechangefailed pagecreate pagehide pageinit pageload pageloadfailed pageremove pageshow".split(" ")}
function drupalgap_jqm_page_event_script_code(a,b){try{var c='"'+a.jqm_page_event+'", "'+a.jqm_page_event_callback+'", '+a.jqm_page_event_args;b&&(c+=', "'+b+'"');return'<script type="text/javascript">$("#'+a.page_id+'").on("'+a.jqm_page_event+'", drupalgap_jqm_page_event_fire('+c+"));\x3c/script>"}catch(d){console.log("drupalgap_jqm_page_event_script_code - "+d)}}
function drupalgap_loading_message_show(a){try{if("undefined"===drupalgap.loading&&(drupalgap.loading=!1),!drupalgap.loading){var b=drupalgap_loader_options();a&&(b=a);setTimeout(function(){$.mobile.loading("show",b);drupalgap.loading=!0},1)}}catch(c){console.log("drupalgap_loading_message_show - "+c)}}
function drupalgap_loading_message_hide(){try{setTimeout(function(){$.mobile.loading("hide");drupalgap.loading=!1;drupalgap.loader="loading"},100)}catch(a){console.log("drupalgap_loading_message_hide - "+a)}}
function drupalgap_loader_options(){try{var a=drupalgap.loader,b=t("Loading")+"...";"saving"==a&&(b=t("Saving")+"...");b={text:b,textVisible:!0};drupalgap.settings.loader&&drupalgap.settings.loader[a]&&(b=$.extend(!0,b,drupalgap.settings.loader[a]),b.text&&(b.text=t(b.text)));return b}catch(c){console.log("drupalgap_loader_options - "+c)}}
function drupalgap_max_width(){try{var a=parseInt($(".ui-content").css("padding"));isNaN(a)&&(a=16);return $(document).width()-2*a}catch(b){console.log("drupalgap_max_width - "+b)}}
function drupalgap_menu_access(a,b,c){try{if(1==Drupal.user.uid)return!0;b=!1;if(drupalgap.menu_links[a])if("undefined"===typeof drupalgap.menu_links[a].access_callback)if(drupalgap.menu_links[a].access_arguments){if($.isArray(drupalgap.menu_links[a].access_arguments))for(var d in drupalgap.menu_links[a].access_arguments)if(drupalgap.menu_links[a].access_arguments.hasOwnProperty(d)&&(b=user_access(drupalgap.menu_links[a].access_arguments[d])))break}else b=!0;else{var e=drupalgap.menu_links[a].access_callback;
if(drupalgap_function_exists(e)){var f=window[e];if(drupalgap.menu_links[a].access_arguments){var g=drupalgap.menu_links[a].access_arguments.slice(0);if(c)for(d in g)if(g.hasOwnProperty(d)&&is_int(parseInt(g[d]))){g[d]=c;break}return f.apply(null,Array.prototype.slice.call(g))}return f()}console.log("drupalgap_menu_access - access call back ("+e+") does not exist")}else console.log("drupalgap_menu_access - path ("+a+") does not exist");return b}catch(h){console.log("drupalgap_menu_access - "+h)}}
function drupalgap_module_load(a){try{return module_load(a)}catch(b){console.log("drupalgap_module_load - "+b)}}function drupalgap_modules_get_bundle_directory(a){try{return dir="","core"==a?dir="modules":"contrib"==a?dir="app/modules":"custom"==a&&(dir="app/modules/custom"),dir}catch(b){console.log("drupalgap_modules_get_bundle_directory - "+b)}}
function drupalgap_place_args_in_path(a,b){try{var c=!1;if(a){var d=drupalgap_path_get();b&&(d=b);var e=arg(null,d),f,g=arg(null,a);if(g&&0<g.length){for(var h in g)g.hasOwnProperty(h)&&"%"==g[h]&&(f||(f=[]),f.push(h));if(f&&0<f.length){for(h in f)if(f.hasOwnProperty(h)){var k=f[h];e[k]&&(g[k]=e[k])}c=g.join("/")}}}return c}catch(m){console.log("drupalgap_place_args_in_path - "+m)}}
function drupalgap_path_has_entity_arg(a){try{return 1<a.length&&("comment"==a[0]||"file"==a[0]||"node"==a[0]||"taxonomy"==a[0]&&("vocabulary"==a[1]||"term"==a[1])||"user"==a[0]||"item"==a[0])?!0:!1}catch(b){console.log("drupalgap_path_has_entity_arg - "+b)}}function drupalgap_remove_page_from_dom(a){try{$("#"+a).empty().remove()}catch(b){console.log("drupalgap_remove_page_from_dom - "+b)}}
function drupalgap_set_message(a,b){try{if(!empty(a)){var c="status";b&&(c=b);drupalgap.messages.push({message:a,type:c})}}catch(d){console.log("drupalgap_set_message - "+d)}}function drupalgap_set_messages(a){try{drupalgap.messages=a}catch(b){console.log("drupalgap_set_messages - "+b)}}function drupalgap_get_messages(){try{return drupalgap.messages}catch(a){console.log("drupalgap_get_messages - "+a)}}
function drupalgap_clear_messages(a){try{empty(a)&&(a=drupalgap_get_page_id()),$("#"+a+" div.messages").remove()}catch(b){console.log("drupalgap_clear_messages - "+b)}}function drupalgap_set_title(a){try{a&&(drupalgap.page.title=a)}catch(b){console.log("drupalgap_set_title - "+b)}}function drupalgap_services_preprocess(a){try{drupalgap_loading_message_show()}catch(b){console.log("drupalgap_services_preprocess - "+b)}}
function drupalgap_services_postprocess(a,b){try{drupalgap_loading_message_hide()}catch(c){console.log("drupalgap_services_postprocess - "+c)}}
function drupalgap_services_request_pre_postprocess_alter(a,b){try{if("system"==a.service&&"connect"==a.resource)drupalgap.remote_addr=b.remote_addr,drupalgap.entity_info=b.entity_info,drupalgap.field_info_instances=b.field_info_instances,drupalgap.field_info_fields=b.field_info_fields,drupalgap.field_info_extra_fields=b.field_info_extra_fields,drupalgap.taxonomy_vocabularies=drupalgap_taxonomy_vocabularies_extract(b.taxonomy_vocabularies),drupalgap_service_resource_extract_results({service:a.service,
resource:a.resource,data:b});else if("user"==a.service&&("logout"==a.resource||"login"==a.resource||"register"==a.resource))drupalgap_remove_pages_from_dom();else if(in_array(a.resource,["create","update","delete"])&&in_array(a.service,entity_types())){var c=a.entity_type,d=a.entity_id,e=a.bundle||null,f=[];if("create"!=a.resource)e=c,in_array(c,["taxonomy_vocabulary","taxonomy_term"])&&(e=e.replace("_","/",e)),f.push(e+"/"+d),f.push(e+"/"+d+"/view"),f.push(e+"/"+d+"/edit");else switch(c){case "node":f.push("node/add/"+
e)}switch(c){case "node":f.push("node");break;case "taxonomy_vocabulary":f.push("taxonomy/vocabularies");break;case "user":f.push("user-listing")}var c=[],g;for(g in f)f.hasOwnProperty(g)&&c.push(drupalgap_get_page_id(f[g]));for(g in c)c.hasOwnProperty(g)&&drupalgap_remove_page_from_dom(c[g])}}catch(h){console.log("drupalgap_services_request_pre_postprocess_alter - "+h)}}
function drupalgap_settings_load(){try{console.log("WARNING: drupalgap_settings_load() is deprecated!")}catch(a){console.log("drupalgap_settings_load - "+a)}}
function drupalgap_theme_registry_build(){try{var a=module_implements("theme"),b;for(b in a)if(a.hasOwnProperty(b)){var c=(0,window[a[b]+"_theme"])(),d;for(d in c)if(c.hasOwnProperty(d)){var e=c[d];e.path=drupalgap_get_path("theme",drupalgap.settings.theme);drupalgap.theme_registry[d]=e}}}catch(f){console.log("drupalgap_theme_registry_build - "+f)}}
function variable_set(a,b){try{return b?is_int(b)?b=b.toString():"object"===typeof b&&(b=JSON.stringify(b)):b=" ",window.localStorage.setItem(a,b)}catch(c){drupalgap_error(c)}}function variable_get(a,b){try{var c=window.localStorage.getItem(a);c||(c=b);" "==c&&(c="");return c}catch(d){drupalgap_error(d)}}function variable_del(a){try{return window.localStorage.removeItem(a)}catch(b){drupalgap_error(b)}}
function date_yyyy_mm_dd_hh_mm_ss(a){try{var b;b=a?a:date_yyyy_mm_dd_hh_mm_ss_parts();return b.year+"-"+b.month+"-"+b.day+" "+b.hour+":"+b.minute+":"+b.second}catch(c){console.log("date_yyyy_mm_dd_hh_mm_ss - "+c)}}
function date_yyyy_mm_dd_hh_mm_ss_parts(a){try{var b=[],c=null,c=a?a:new Date,d=""+c.getFullYear(),e=""+(c.getMonth()+1);1==e.length&&(e="0"+e);var f=""+c.getDate();1==f.length&&(f="0"+f);var g=""+c.getHours();1==g.length&&(g="0"+g);var h=""+c.getMinutes();1==h.length&&(h="0"+h);var k=""+c.getSeconds();1==k.length&&(k="0"+k);b.year=d;b.month=e;b.day=f;b.hour=g;b.minute=h;b.second=k;return b}catch(m){console.log("date_yyyy_mm_dd_hh_mm_ss_parts - "+m)}}
function date_number_of_days_in_month(a,b){try{return(new Date(a,b,0)).getDate()}catch(c){console.log("date_number_of_days_in_month - "+c)}}function scrollToElement(a,b,c){try{b="undefined"!=typeof b?b:1E3,c="undefined"!=typeof c?c:0,element=$(a),offset=element.offset(),offsetTop=offset.top+c,$("html, body").animate({scrollTop:offsetTop},b)}catch(d){console.log("scrollToElement - "+d)}}
var _theme_autocomplete_input_selector={},_theme_autocomplete_remote={},_theme_autocomplete_variables={},_theme_autocomplete_success_handlers={};
function theme_autocomplete(a){try{var b="",c=null,c="undefined"!==typeof a.field_info_field?a.field_info_field.field_name:"undefined"!==typeof a.attributes.id?a.attributes.id:user_password();a.autocomplete_id=c;_theme_autocomplete_variables[c]=a;var d=!1;a.remote&&(d=!0);a.remote=d;_theme_autocomplete_remote[c]=a.remote;d=null;a.attributes.id?d=a.attributes.id:(d="autocomplete_"+user_password(),a.attributes.id=d);var e={id:d};a.element&&"undefined"!==typeof a.element.default_value&&(e.value=a.element.default_value);
var b=b+theme("hidden",{attributes:e}),e=d+"-list",f={attributes:{id:e,"data-role":"listview","data-filter":"true","data-inset":"true","data-filter-placeholder":"..."}},g="";a.remote?(f.items=[],g+='<script type="text/javascript">$("#'+e+'").on("filterablebeforefilter", function(e, d) { _theme_autocomplete(this, e, d, "'+c+'"); });\x3c/script>'):(f.items=_theme_autocomplete_prepare_items(a),f.attributes["data-filter-reveal"]=!0);var h="#"+drupalgap_get_page_id()+" #"+d+' + form.ui-filterable input[data-type="search"]',
g=g+('<script type="text/javascript">_theme_autocomplete_input_selector["'+c+"\"] = '"+h+"';\x3c/script>");a.default_value_label&&(g+=drupalgap_jqm_page_event_script_code({page_id:drupalgap_get_page_id(),jqm_page_event:"pageshow",jqm_page_event_callback:"_theme_autocomplete_set_default_value_label",jqm_page_event_args:JSON.stringify({selector:h,default_value_label:a.default_value_label})},d));b+=theme("item_list",f);return b+g}catch(k){console.log("theme_autocomplete - "+k)}}
function _theme_autocomplete(a,b,c,d){try{var e=_theme_autocomplete_variables[d];if("undefined"===typeof e.filter)console.log('_theme_autocomplete - A "filter" was not supplied.');else{var f="undefined"!==typeof e.value?!0:!1,g="undefined"!==typeof e.label?!0:!1;if(f||g){f?g||(e.label=e.value):e.value=e.label;var h=$(a),k=$(c.input).val(),m="";h.html("");if(k&&0<k.length)switch(h.html('<li><div class="ui-loader"><span class="ui-icon ui-icon-loading"></span></div></li>'),h.listview("refresh"),_theme_autocomplete_success_handlers[d]=
function(a,b,c,d){try{if(0==b.length){if(e.empty_callback){var f=window[e.empty_callback];f(k)}}else{var g=[],n=e.value,p=e.label,q;for(q in b)if(b.hasOwnProperty(q)){var r=b[q],s=null,s=c?r[d]:r,u={value:s[n],label:s[p]};g.push(u)}if(0!=g.length){e.items=g;var v=_theme_autocomplete_prepare_items(e);for(q in v)v.hasOwnProperty(q)&&(u=v[q],m+="<li>"+u+"</li>");h.html(m);h.listview("refresh");h.trigger("updatelayout")}}e.finish_callback&&(f=window[e.finish_callback],f(k))}catch(x){console.log("_theme_autocomplete_success_handlers["+
a+"] - "+x)}},a=null,a=e.custom?e.handler?e.handler:e.field_info_field.settings.handler?e.field_info_field.settings.handler:"views":e.field_info_field.settings.handler,a){case "views":case "og":var n=e.path+"?"+e.filter+"="+encodeURIComponent(k);e.params&&(n+="&"+e.params);views_datasource_get_view_result(n,{success:function(a){var b=!0;e.custom&&(b=!1);var c=null,c=b?a[a.view.root]:a;(0,_theme_autocomplete_success_handlers[d])(d,c,b,a.view.child)}});break;case "base":var q=e.field_info_field.settings,
p=q.target_type+"_index";if(!drupalgap_function_exists(p)){console.log("WARNING - _theme_autocomplete - "+p+"() does not exist!");break}var r={fields:[e.value,e.filter],parameters:{},parameters_op:{}};r.parameters[e.filter]="%"+k+"%";r.parameters_op[e.filter]="like";for(var s in q.handler_settings.target_bundles)if(q.handler_settings.target_bundles.hasOwnProperty(s)){r.parameters.type=s;break}var u=window[p];u(r,{success:function(a){(0,_theme_autocomplete_success_handlers[d])(d,a,!1)}});break;case "index":if(!e.entity_type){console.log("WARNING - _theme_autocomplete - no entity_type provided");
break}u=window[e.entity_type+"_index"];n=null;if(e.query)n=e.query;else{var n={parameters:{},parameters_op:{}},x=[entity_primary_key(e.entity_type),entity_primary_key_title(e.entity_type)];"taxonomy_term"==e.entity_type&&e.vid&&(n.parameters.vid=e.vid);n.fields=x;n.parameters[e.filter]="%"+k+"%";n.parameters_op[e.filter]="like"}u.apply(null,[n,{success:function(a){(0,_theme_autocomplete_success_handlers[d])(d,a,!1,null)}}]);break;default:a||console.log("WARNING - _theme_autocomplete - no handler provided")}}else console.log('_theme_autocomplete - A "value" and/or "label" was not supplied.')}}catch(v){console.log("_theme_autocomplete - "+
v)}}function _theme_autocomplete_prepare_items(a){try{var b=[];a.items&&(b=a.items);var c=[];if(0<b.length)for(var d in b)if(b.hasOwnProperty(d)){var e=b[d],f="",g="";"string"===typeof e?g=f=e:(f=e.value,g=e.label);var h=l(g,null,{attributes:{value:f,onclick:"_theme_autocomplete_click('"+a.attributes.id+"', this, '"+a.autocomplete_id+"')"}});c.push(h)}return c}catch(k){console.log("_theme_autocomplete_prepare_items - "+k)}}
function _theme_autocomplete_click(a,b,c){try{var d=a+"-list";$("#"+a).val($(b).attr("value"));$(_theme_autocomplete_input_selector[c]).val($(b).html());_theme_autocomplete_remote[c]?$("#"+d).html(""):($("#"+d+" li").addClass("ui-screen-hidden"),$("#"+d).listview("refresh"));if(_theme_autocomplete_variables[c].item_onclick&&drupalgap_function_exists(_theme_autocomplete_variables[c].item_onclick))(0,window[_theme_autocomplete_variables[c].item_onclick])(a,$(b))}catch(e){console.log("_theme_autocomplete_click - "+
e)}}function _theme_autocomplete_set_default_value_label(a){try{setTimeout(function(){$(a.selector).val(a.default_value_label).trigger("create")},250)}catch(b){console.log("_theme_autocomplete_set_default_value_label - "+b)}}
function drupalgap_block_load(a){try{var b=null;if(drupalgap.blocks)for(var c in drupalgap.blocks)if(drupalgap.blocks.hasOwnProperty(c)){var d=drupalgap.blocks[c];if(d[a]){b=d[a];break}}if(null==b){var e="drupalgap_block_load - "+t("failed to load")+' "'+a+'" '+t("block!");drupalgap_alert(e)}return b}catch(f){console.log("drupalgap_block_load - "+f)}}
function drupalgap_block_render(a,b,c,d,e){try{var f="",g=!1;d.access_callback&&drupalgap_function_exists(d.access_callback)?g=(0,window[d.access_callback])({path:b,delta:c,region:a.name,theme:drupalgap.settings.theme,settings:d}):drupalgap_check_visibility("block",d)&&(g=!0,"main"==c||"offline"!=b&&"error"!=b||(g=!1));if(g){var h=drupalgap_block_load(c);e&&e.block_count++;menu_load(c)&&e&&e.block_menu_count++;h&&(f=module_invoke(h.module,"block_view",c,a))}return f}catch(k){console.log("drupalgap_block_render - "+
k)}}function drupalgap_attributes(a){try{var b="";if(a)for(var c in a)if(a.hasOwnProperty(c))var d=a[c],b=""!=d?b+(c+'="'+d+'" '):b+(c+" ");return b}catch(e){console.log("drupalgap_attributes - "+e)}}
function drupalgap_check_visibility(a,b){try{var c=!0;if("undefined"===typeof b)console.log("drupalgap_check_visibility - WARNING - no data provided for type ("+a+")");else if("undefined"!==typeof b.roles&&b.roles&&b.roles.value&&0!=b.roles.value.length)for(var d in b.roles.value){if(b.roles.value.hasOwnProperty(d)&&(drupalgap_user_has_role(b.roles.value[d])?("include"==b.roles.mode&&(c=!0),"exclude"==b.roles.mode&&(c=!1)):("include"==b.roles.mode&&(c=!1),"exclude"==b.roles.mode&&(c=!0)),c))break}else if("undefined"!==
typeof b.pages&&b.pages&&b.pages.value&&0!=b.pages.value.length){var e=drupalgap_path_get(),f=e.split("/"),g;for(g in b.pages.value)if(b.pages.value.hasOwnProperty(g)){var h=b.pages.value[g];""==h&&(h=drupalgap.settings.front);if(h==e){"include"==b.pages.mode?c=!0:"exclude"==b.pages.mode&&(c=!1);break}else if(-1!=h.indexOf("*"))if(drupalgap_get_menu_link_router_path(e).replace(/%/g,"*")==h){"include"==b.pages.mode?c=!0:"exclude"==b.pages.mode&&(c=!1);break}else{var k=h.split("/");d=!0;if(0==k.length)d=
!1;else if(k.length==f.length)for(var m=0;m<k.length;m++)if(k[m]!=f[m]){d=!1;break}"include"==b.pages.mode?c=!1:"exclude"==b.pages.mode&&(c=!0);d||(c=!c)}else"include"==b.pages.mode?c=!1:"exclude"==b.pages.mode&&(c=!0)}}return c}catch(n){console.log("drupalgap_check_visibility - "+n)}}
function drupalgap_get_bundle(a,b){try{var c=null;switch(a){case "node":c=b.type;break;case "comment":case "file":case "user":case "taxonomy_vocabulary":case "taxonomy_term":break;default:console.log("WARNING: drupalgap_get_bundle - unsupported entity type ("+a+")")}return c}catch(d){console.log("drupalgap_get_bundle - "+d)}}
function drupalgap_get_path(a,b){try{var c=null;if("module"==a){var d=!1,e;for(e in Drupal.modules)if(Drupal.modules.hasOwnProperty(e)){var f=Drupal.modules[e];if(d)break;else for(var g in f)if(f.hasOwnProperty(g)&&f[g].name==b){d=!0;c="";if("core"==e)c+="modules";else if("contrib"==e)c+="app/modules";else if("custom"==e)c+="app/modules/custom";else{drupalgap_alert("drupalgap_get_path - unknown module bundle ("+e+")");break}c+="/"+b;break}}}else"theme"==a?c="easystreet3"==b||"ava"==b?"themes/"+b:
"app/themes/"+b:console.log("WARNING: drupalgap_get_path - unsupported type ("+a+")");return c}catch(h){console.log("drupalgap_get_path - "+h)}}function drupalgap_error(a){try{var b="drupalgap_error() - "+arguments.callee.caller.name+" - "+a;dpm(b);Drupal.settings.debug&&drupalgap_alert(b);arguments[1]&&drupalgap_alert(arguments[1]);"error"!=drupalgap_path_get()&&drupalgap_goto("error")}catch(c){console.log("drupalgap_error - "+c)}}
function drupalgap_link_get_class(a){try{var b=null;a.options&&a.options.attributes&&a.options.attributes["class"]&&!empty(a.options.attributes["class"])&&(b=a.options.attributes["class"]);return b}catch(c){console.log("drupalgap_link_get_class - "+c)}}function drupalgap_path_get(){try{return drupalgap.path}catch(a){console.log("drupalgap_path_get - "+a)}}function drupalgap_path_set(a){try{drupalgap.path=a}catch(b){console.log("drupalgap_path_set - "+b)}}
function drupalgap_router_path_get(){try{return drupalgap.router_path}catch(a){console.log("drupalgap_router_path_get - "+a)}}function drupalgap_router_path_set(a){try{drupalgap.router_path=a}catch(b){console.log("drupalgap_router_path_set - "+b)}}
function arg(){try{var a=null;if(0==arguments.length||1==arguments.length){var b=drupalgap_path_get().split("/");0==arguments.length?a=b:b[arguments[0]]&&(a=b[arguments[0]])}else b=arguments[1].split("/"),a=arguments[0]&&b[arguments[0]]?b[arguments[0]]:b;return a}catch(c){console.log("arg - "+c)}}function l(a,b,c){try{return a={text:a,path:b},b=null,c&&(b=c,b.attributes&&(a.attributes=b.attributes),a.options=b),theme("link",a)}catch(d){console.log("l - "+d)}}
function bl(a,b,c){try{var d=null,d=c?c:{};d.attributes||(d.attributes={});d.attributes["data-role"]="button";return l(a,b,d)}catch(e){console.log("bl - "+e)}}function t(a,b,c,d){b=d?d:Drupal.settings.language_default;return"und"!=b&&"undefined"!==typeof drupalgap.locale[b]&&drupalgap.locale[b][a]?drupalgap.locale[b][a]:a}function drupalgap_form_element_access(a){try{var b=!0;0==a.access&&(b=!1);return b}catch(c){console.log("drupalgap_form_element_access - "+c)}}
function drupalgap_form_element_get_module_name(a){try{var b=!1;switch(a){case "checkbox":case "radios":case "select":b="options";break;case "image":b="image"}return b}catch(c){console.log("drupalgap_form_element_get_module_name - "+c)}}
function drupalgap_form_get_element_id(a,b,c,d){try{if(null==a||""==a)return"";var e="edit-"+b.toLowerCase().replace(/_/g,"-")+"-"+a.toLowerCase().replace(/_/g,"-");c&&(e+="-"+c);"undefined"!==typeof d&&(e+="-"+d+"-value");return e}catch(f){console.log("drupalgap_form_get_element_id - "+f)}}function drupalgap_form_get_element_container_class(a){try{return"form-item field-name-"+a.replace(/_/g,"-")}catch(b){console.log("drupalgap_form_get_element_container_class - "+b)}}
function _drupalgap_form_render_elements(a){try{var b="",c="",d=[],e;for(e in a.elements)if(a.elements.hasOwnProperty(e)){var f=a.elements[e];f.name||(f.name=e);if(drupalgap_form_element_access(f))if(f.is_field&&"undefined"!==typeof f.field_info_instance.widget.weight)d[f.field_info_instance.widget.weight]=_drupalgap_form_render_element(a,f);else{var g=null;a.bundle&&(g=a.bundle,"comment"==a.entity_type&&-1!=a.bundle.indexOf("comment_node_")&&(g=a.bundle.replace("comment_node_","")));if(a.entity_type&&
g&&"undefined"!==typeof drupalgap.field_info_extra_fields[g][e]&&"undefined"!==typeof drupalgap.field_info_extra_fields[g][e].weight){var h=drupalgap.field_info_extra_fields[g][e].weight;d[h]=_drupalgap_form_render_element(a,f)}else b+=_drupalgap_form_render_element(a,f)}}if(!empty(d)){for(h in d)c+=d[h]+"\n";b=c+"\n"+b}if(a.buttons&&0!=a.buttons.length)for(e in a.buttons)if(a.buttons.hasOwnProperty(e)){var k=a.buttons[e];if(drupalgap_form_element_access(k)){var m={type:"button",id:drupalgap_form_get_element_id(e,
a.id)};k.attributes&&$.extend(m,k.attributes);b+="<button "+drupalgap_attributes(m)+'">'+k.title+"</button>"}}return b}catch(n){console.log("_drupalgap_form_render_elements - "+n)}}
function _drupalgap_form_render_element(a,b){try{var c="";if(!b)return c;var d=b.name,e=language_default(),f=!1,g=!1,h=!1,k=!1;b.is_field?(f=b[e],g=b.field_info_instance.widget.module):(f={0:b},g=drupalgap_form_element_get_module_name(b.type));g&&(h=g+"_field_widget_form",drupalgap_function_exists(h)?k=window[h]:console.log("WARNING: _drupalgap_form_render_element() - "+h+'() does not exist for the "'+b.type+'" form element!'));if(!f||0==f.length)return c;var m={attributes:{}};m.field_info_field=
b.field_info_field;m.field_info_instance=b.field_info_instance;var n=0,h=g="",q=null;for(n in f)if(f.hasOwnProperty(n)){var p=f[n],q=!0;m.attributes.id=p.id;m.element=p;f[n].children||(f[n].children=[]);b.is_field&&0==n&&(p.title=b.title,h=theme("form_element_label",{element:p}));0==n&&"undefined"!==typeof b.title_placeholder&&b.title_placeholder&&"undefined"===typeof m.attributes.placeholder&&(m.attributes.placeholder=b.title);p.default_value||(p.default_value="");m.attributes.value=p.default_value;
"undefined"!==typeof p.value&&(m.attributes.value=p.value);k&&(k.apply(null,[a,null,b.field_info_field,b.field_info_instance,e,f,n,b]),p=$.extend(!0,p,f[n]),!p.type&&b.type&&(p.type=b.type));p.options&&p.options.attributes&&(m.attributes=$.extend(!0,m.attributes,p.options.attributes));g=_drupalgap_form_render_element_item(a,b,m,p);if("undefined"===typeof g){q=!1;break}}if(!q)return"";e=!0;"undefined"===typeof b.wrapped||b.wrapped||(e=!1);"hidden"==b.type&&(e=!1,b.wrapped&&(e=!0));b.prefix&&(c+=b.prefix);
var r={"class":drupalgap_form_get_element_container_class(d)};e&&(c+="<div "+drupalgap_attributes(r)+">");"submit"==b.type||"hidden"==b.type||"undefined"!==typeof b.title_placeholder&&b.title_placeholder||(c=b.is_field?c+h:c+theme("form_element_label",{element:b}));""!=g&&(c+=g);b.description&&"hidden"!=b.type&&(c+="<div>"+t(b.description)+"</div>");e&&(c+="</div>");b.suffix&&(c+=b.suffix);return c}catch(s){console.log("_drupalgap_form_render_element - "+s)}}
function _drupalgap_form_render_element_item(a,b,c,d){try{var e="";switch(d.type){case "text":d.type="textfield";break;case "list_text":case "list_float":case "list_integer":d.type="select"}var f=d.type;b.disabled&&(c.attributes.disabled="");"submit"==d.type&&(c.attributes.onclick="_drupalgap_form_submit('"+a.id+"');",c.attributes["data-theme"]||(c.attributes["data-theme"]="b"),"undefined"===typeof c.attributes.type&&(c.attributes.type="button"),"undefined"===typeof c.attributes["class"]&&(c.attributes["class"]=
""),c.attributes["class"]+=" dg_form_submit_button ");$.extend(!0,c,d);"undefined"!==typeof c.value&&null!=c.value||"undefined"===typeof d.default_value||(c.value=d.default_value);if(drupalgap_function_exists("theme_"+f))e+=theme(f,c);else if(d.markup||""==d.markup)e+=d.markup;else return console.log("WARNING: _drupalgap_form_render_element_item() - "+("Field "+d.type+" not supported.")),dpm(d),null;if(d.children&&0<d.children.length)for(a=0;a<d.children.length;a++)if(d.children[a].markup)e+=d.children[a].markup;
else if(d.children[a].type||d.children[a].theme){var g=d.children[a].type;g||(g=d.children[a].theme);d.children[a].title&&(e+=theme("form_element_label",{element:d.children[a]}));d.children[a].prefix&&(e+=d.children[a].prefix);e+=theme(g,d.children[a]);d.children[a].suffix&&(e+=d.children[a].suffix)}else console.log("WARNING: _drupalgap_form_render_element_item - failed to render child "+a+" for "+b.name);return e}catch(h){console.log("_drupalgap_form_render_element_item - "+h)}}
function drupalgap_form_element_item_create(a,b,c,d){try{var e=drupalgap_form_get_element_id(a,b.id,c,d);return{id:e,options:{attributes:{id:e}},required:b.elements[a].required}}catch(f){console.log("drupalgap_form_element_item_create - "+f)}}
function _drupalgap_form_element_items_widget_arguments(a,b,c,d,e){try{var f=[];f.push(a);f.push(b);f.push(c.field_info_field);f.push(c.field_info_instance);f.push(d);f.push(a.elements[c.name][d]);f.push(e);f.push(c);return f}catch(g){console.log("_drupalgap_form_element_items_widget_arguments - "+g)}}
function _drupalgap_form_add_another_item(a,b,c){try{var d="."+drupalgap_form_get_element_container_class(b)+" .drupalgap_form_add_another_item",e=$(d),f=drupalgap_form_local_storage_load(a),g=language_default(),h=drupalgap_form_element_item_create(b,f,g,c+1);f.elements[b][g][c+1]=h;var k=f.elements[b],m={attributes:{},field_info_field:k.field_info_field,field_info_instance:k.field_info_instance};window[k.field_info_instance.widget.module+"_field_widget_form"].apply(null,_drupalgap_form_element_items_widget_arguments(f,
null,k,g,c+1));drupalgap_form_local_storage_save(f);$(e).before(_drupalgap_form_render_element_item(f,k,m,h))}catch(n){console.log("_drupalgap_form_add_another_item - "+n)}}function drupalgap_form_cancel_button(){return{title:t("Cancel"),attributes:{onclick:"javascript:drupalgap_back();"}}}function drupalgap_form_clear(a){try{$(":input",a).not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}catch(b){console.log("drupalgap_form_clear - "+b)}}
function drupalgap_form_defaults(a){try{var b={};b.id=a;b.elements={};b.buttons={};b.options={attributes:{"class":""}};b.prefix="";b.suffix="";b.validate=[];b.submit=[];var c=b.id+"_validate";drupalgap_function_exists(c)&&b.validate.push(c);var d=b.id+"_submit";drupalgap_function_exists(d)&&b.submit.push(d);return b}catch(e){console.log("drupalgap_form_defaults - "+e)}}
function drupalgap_form_render(a){try{if(!a.id)return"<p>drupalgap_form_render() - missing form id!</p>"+JSON.stringify(a);$("form#"+a.id).length&&$("form#"+a.id).remove();var b=a.prefix;empty(b)||(b='<div class="form_prefix">'+b+"</div>");var c=a.suffix;empty(c)||(c='<div class="form_suffix">'+c+"</div>");var d=_drupalgap_form_render_elements(a),e=drupalgap_attributes(a.options.attributes);return'<form id="'+a.id+'" '+e+">"+b+'<div id="drupalgap_form_errors"></div>'+d+c+"</form>"}catch(f){console.log("drupalgap_form_render - "+
f)}}function drupalgap_form_set_error(a,b){try{drupalgap.form_errors[a]=b}catch(c){console.log("drupalgap_form_set_error - "+c)}}function drupalgap_get_form(a){try{var b="",c=drupalgap_form_load.apply(null,Array.prototype.slice.call(arguments));if(c)b=drupalgap_form_render(c);else{var d="drupalgap_get_form - "+t("failed to get form")+" ("+a+")";drupalgap_alert(d)}return b}catch(e){console.log("drupalgap_get_form - "+e)}}
function drupalgap_form_load(a){try{var b=drupalgap_form_defaults(a),c=a;if(drupalgap_function_exists(c)){var d=window[c],e=language_default(),c=[],f;for(f in arguments)if(arguments.hasOwnProperty(f)){var g=arguments[f];c.push(g)}c.splice(0,1);b.arguments=c;if(0==c.length)b=d(b,null);else{var h=[];h.push(b);h.push(null);for(f in c)c.hasOwnProperty(f)&&(g=c[f],h.push(g));b=d.apply(null,Array.prototype.slice.call(h))}for(var k in b.elements)if(b.elements.hasOwnProperty(k)){var m=b.elements[k],d=!1,
n=drupalgap_field_info_field(k);n&&(d=!0,b.elements[k].field_info_field=n,b.elements[k].field_info_instance=drupalgap_field_info_instance(b.entity_type,k,b.bundle));b.elements[k].is_field=d;b.elements[k].name||(b.elements[k].name=k);f=null;if(d){var q=parseInt(m.field_info_field.cardinality);-1==q&&(q=1);b.elements[k][e]||(b.elements[k][e]={});for(d=0;d<q;d++){var p=drupalgap_form_element_item_create(k,b,e,d);b.elements[k][e][d]?$.extend(!0,b.elements[k][e][d],p):b.elements[k][e][d]=p}}else m.options?
m.options.attributes||(b.elements[k].options.attributes={}):b.elements[k].options={attributes:{}},f=drupalgap_form_get_element_id(k,b.id),b.elements[k].id=f,b.elements[k].options.attributes.id=f}module_invoke_all("form_alter",b,null,a);drupalgap_form_local_storage_save(b)}else h="drupalgap_form_load - "+t("no callback function")+" ("+c+") "+t("available for form")+" ("+a+")",drupalgap_alert(h);return b}catch(r){console.log("drupalgap_form_load - "+r)}}
function drupalgap_form_local_storage_delete(a){try{return window.localStorage.removeItem(drupalgap_form_id_local_storage_key(a))}catch(b){console.log("drupalgap_form_local_storage_delete - "+b)}}function drupalgap_form_local_storage_load(a){try{var b=!1;return b=(b=window.localStorage.getItem(drupalgap_form_id_local_storage_key(a)))?JSON.parse(b):!1}catch(c){console.log("drupalgap_form_local_storage_load - "+c)}}
function drupalgap_form_local_storage_save(a){try{window.localStorage.setItem(drupalgap_form_id_local_storage_key(a.id),JSON.stringify(a))}catch(b){console.log("drupalgap_form_local_storage_save - "+b)}}function drupalgap_form_id_local_storage_key(a){return"drupalgap_form_"+a}
function drupalgap_form_onkeypress(a){try{var b=window.event;if("13"==(b.which||b.keyCode))return $("#"+a+" button.dg_form_submit_button").click(),b.preventDefault(),!1}catch(c){console.log("drupalgap_form_onkeypress - "+c)}}
function _drupalgap_form_submit(a){try{var b=drupalgap_form_local_storage_load(a);if(!b){var c="_drupalgap_form_submit - "+t("failed to load form")+": "+a;drupalgap_alert(c);return!1}var d=drupalgap_form_state_values_assemble(b);drupalgap.form_errors={};a=function(){try{for(var a in b.validate)b.validate.hasOwnProperty(a)&&window[b.validate[a]].apply(null,Array.prototype.slice.call([b,d]));_drupalgap_form_validate(b,d);if(jQuery.isEmptyObject(drupalgap.form_errors))try{for(var c in b.submit)b.submit.hasOwnProperty(c)&&
window[b.submit[c]].apply(null,Array.prototype.slice.call([b,d]))}catch(e){console.log("_drupalgap_form_submit - form_submission - "+e)}else{a="";for(var k in drupalgap.form_errors)drupalgap.form_errors.hasOwnProperty(k)&&(a+=drupalgap.form_errors[k]+"\n\n");drupalgap_alert(a)}}catch(m){console.log("_drupalgap_form_submit - form_validation - "+m)}};b.entity_type&&image_fields_present_on_entity_type(b.entity_type,b.bundle)?_image_field_form_process(b,d,{success:a}):a()}catch(e){console.log("_drupalgap_form_submit - "+
e)}}
function _drupalgap_form_validate(a,b){try{for(var c in a.elements)if(a.elements.hasOwnProperty(c)){var d=a.elements[c];if("submit"!=c&&d.required){var e=!0,f=null,f=d.is_field?b.values[c][language_default()][0]:b.values[c];if(empty(f))e=!1;else if("select"==d.type&&d.required&&""==f)e=!1;else if("checkboxes"==d.type&&d.required){var g=!1,h;for(h in b.values[c])if(b.values[c].hasOwnProperty(h)&&(f=b.values[c][h])){g=!0;break}g||(e=!1)}e||(e=c,d.title&&(e=d.title),drupalgap_form_set_error(c,t("The")+" "+
e+" "+t("field is required")+"."))}}}catch(k){console.log("_drupalgap_form_validate - "+k)}}
function drupalgap_form_state_values_assemble(a){try{var b=language_default(),c={values:{}},d;for(d in a.elements)if(a.elements.hasOwnProperty(d)){var e=a.elements[d];if("submit"!=d){var f=null;if(e.is_field){c.values[d]={};c.values[d][b]={};var g=e.field_info_field.cardinality;-1==g&&(g=1);for(var h=0;h<g;h++)f=drupalgap_form_get_element_id(d,a.id,b,h),c.values[d][b][h]=_drupalgap_form_state_values_assemble_get_element_value(f,e)}else f=drupalgap_form_get_element_id(d,a.id),c.values[d]=_drupalgap_form_state_values_assemble_get_element_value(f,
e)}}return drupalgap.form_states[a.id]=c}catch(k){console.log("drupalgap_form_state_values_assemble - "+k)}}
function _drupalgap_form_state_values_assemble_get_element_value(a,b){try{if(b.value_callback&&function_exists(b.value_callback))return(0,window[b.value_callback])(a,b);var c=null,d="",d="radios"==b.type?'input:radio[name="'+a+'"]:checked':"#"+a;switch(b.type){case "checkbox":var e=$(d),c=$(e).is(":checked")?1:0;break;case "checkboxes":var c={},f=$('label[for="'+a+'"]').siblings(".ui-checkbox"),g;for(g in f)if(f.hasOwnProperty(g)){var h=$(f[g]).children("input"),k=$(h).attr("value");$(h).is(":checked")?
c[k]=k:c[k]=0}break;case "list_boolean":e=$(d);c=$(e).is(":checked")?$(e).attr("on"):$(e).attr("off");break;case "list_text":b.field_info_instance&&"options_buttons"==b.field_info_instance.widget.type&&(d='input:radio[name="'+a+'"]:checked')}null===c&&(c=$(d).val());"undefined"===typeof c&&(c=null);return c}catch(m){console.log("_drupalgap_form_state_values_assemble_get_element_value - "+m)}}
function _drupalgap_form_submit_response_errors(a,b,c,d,e){try{var f=JSON.parse(c.responseText);if("object"===typeof f&&f.form_errors){b="";for(var g in f.form_errors)if(f.form_errors.hasOwnProperty(g)){var h=f.form_errors[g];if(""!=h){var k=g.indexOf("]");-1!=k&&(g=g.substr(0,k));c=g;a.elements[g]&&a.elements[g].title&&(c=a.elements[g].title);b+=$("<div>("+c+") - "+h+"</div>").text()+"\n"}}if(""!=b)return b}return!1}catch(m){console.log("_drupalgap_form_submit_response_errors - "+m)}}
function theme_checkbox(a){try{return a.attributes.type="checkbox",a.checked&&(a.attributes.checked="checked"),"<input "+drupalgap_attributes(a.attributes)+" />"}catch(b){console.log("theme_checkbox - "+b)}}
function theme_checkboxes(a){try{var b="";a.attributes.type="checkboxes";for(var c in a.options)if(a.options.hasOwnProperty(c)){var d=a.options[c];if("attributes"!=c){empty(d);var e={value:c,attributes:{name:a.name+"["+c+"]","class":a.name,value:c}};a.value&&a.value[c]&&(e.checked=!0);b+="<label>"+theme("checkbox",e)+"&nbsp;"+d+"</label>"}}return b}catch(f){console.log("theme_checkbox - "+f)}}
function theme_email(a){try{return a.attributes.type="email","<input "+drupalgap_attributes(a.attributes)+" />"}catch(b){console.log("theme_email - "+b)}}function theme_file(a){try{return a.attributes.type="file","<input "+drupalgap_attributes(a.attributes)+" />"}catch(b){console.log("theme_file - "+b)}}
function theme_form_element_label(a){try{var b=a.element;if(empty(b.title))return"";a="";b.id?a=b.id:b.attributes&&b.attributes["for"]&&(a=b.attributes["for"]);"radios"==b.type&&(a=b.name);var c='<label for="'+a+'"><strong>'+b.title+"</strong>";b.required&&(c+=theme("form_required_marker",{}));return c+"</label>"}catch(d){console.log("theme_form_element_label - "+d)}}function theme_form_required_marker(a){return"*"}
function theme_number(a){try{return a.attributes.type="number","<input "+drupalgap_attributes(a.attributes)+" />"}catch(b){console.log("theme_number - "+b)}}function theme_hidden(a){try{return a.attributes.type="hidden",a.attributes.value||null==a.value||(a.attributes.value=a.value),"<input "+drupalgap_attributes(a.attributes)+" />"}catch(b){console.log("theme_hidden - "+b)}}
function theme_password(a){try{return a.attributes.type="password","<input "+drupalgap_attributes(a.attributes)+" />"}catch(b){console.log("theme_password - "+b)}}
function theme_radios(a){try{var b="";if(a.options){var c=a.attributes.type="radio";a.attributes.id&&(c=a.attributes.id,delete a.attributes.id);a.attributes.name||(a.attributes.name=c);var d=0,e;for(e in a.options)if(a.options.hasOwnProperty(e)){var f=a.options[e];if("attributes"==e)return;var g="";a.value&&a.value==e&&(g=' checked="checked" ');var h=c+"_"+d.toString(),k='<label for="'+h+'">'+f+"</label>",b=b+('<input id="'+h+'" value="'+e+'" '+drupalgap_attributes(a.attributes)+g+" />"+k);d++}}return b}catch(m){console.log("theme_radios - "+
m)}}function theme_range(a){try{return a.attributes.type="range","undefined"===typeof a.attributes.value&&(a.attributes.value=a.value),"<input "+drupalgap_attributes(a.attributes)+" />"}catch(b){console.log("theme_range - "+b)}}function theme_search(a){try{return a.attributes.type="search","<input "+drupalgap_attributes(a.attributes)+" />"}catch(b){console.log("theme_search - "+b)}}
function theme_select(a){try{var b="";if(a.options)for(var c in a.options)if(a.options.hasOwnProperty(c)){var d=a.options[c];if("attributes"!=c){var e="";"undefined"!==typeof a.value&&a.value==c&&(e=" selected ");b+='<option value="'+c+'" '+e+">"+d+"</option>"}}return"<select "+drupalgap_attributes(a.attributes)+">"+b+"</select>"}catch(f){console.log("theme_select - "+f)}}
function theme_tel(a){try{return a.attributes.type="tel","<input "+drupalgap_attributes(a.attributes)+" />"}catch(b){console.log("theme_tel - "+b)}}function theme_textfield(a){try{return a.attributes.type="text","<input "+drupalgap_attributes(a.attributes)+" />"}catch(b){console.log("theme_textfield - "+b)}}function theme_textarea(a){try{return"<div><textarea "+drupalgap_attributes(a.attributes)+">"+a.value+"</textarea></div>"}catch(b){console.log("theme_textarea - "+b)}}
var _drupalgap_goto_query_string=null;
function drupalgap_goto(a,b){try{var c={};b&&(c=b,"undefined"===typeof c.form_submission&&(c.form_submission=!1));drupalgap.page.options=c;a=_drupalgap_goto_prepare_path(a,!0);if(!a)return!1;module_invoke_all("drupalgap_goto_preprocess",a);var d=drupalgap_get_menu_link_router_path(a);if(!drupalgap.menu_links[d]){var e=!1,f=module_invoke_all("404",d);if(f)for(var g in f)if(f.hasOwnProperty(g)){var h=f[g];if(!1!==h){e=h;break}}a=e?e:"404";d=drupalgap_get_menu_link_router_path(a)}"MENU_DEFAULT_LOCAL_TASK"==drupalgap.menu_links[d].type||
"MENU_LOCAL_TASK"==drupalgap.menu_links[d].type||drupalgap_menu_access(d)||(a="401",d=drupalgap_get_menu_link_router_path(a));if(d==drupalgap_router_path_get()&&a==drupalgap_path_get()&&!c.form_submission)if(c.reloadPage)_system_reload_page=a,a="_reload",d=drupalgap_get_menu_link_router_path(a);else return!1;var k=drupalgap_get_page_id(a);if(drupalgap_jqm_active_page_url()==k&&c.form_submission)return drupalgap_clear_messages(),!1;in_array(drupalgap_path_get())||drupalgap.back_path.push(drupalgap_path_get());
drupalgap_path_set(a);drupalgap_router_path_set(d);if(drupalgap_page_in_dom(k))if(drupalgap.menu_links[d].options&&(c=$.extend({},drupalgap.menu_links[d].options,c)),"undefined"!==typeof c.reloadPage&&c.reloadPage)drupalgap_remove_page_from_dom(k,{force:!0,leaveQuery:_drupalgap_goto_query_string?!0:!1}),delete c.reloadPage,c.reloadingPage=!0;else{if(!c.form_submission){drupalgap_clear_messages();_drupalgap_goto_query_string=null;drupalgap.page.process=!1;$.mobile.changePage("#"+k,c);module_invoke_all("drupalgap_goto_post_process",
a);return}}else"undefined"!==typeof c.reloadPage&&c.reloadPage&&delete c.reloadPage;drupalgap_goto_generate_page_and_go(a,k,c,drupalgap.menu_links[d])}catch(m){console.log("drupalgap_goto - "+m)}}
function drupalgap_goto_generate_page_and_go(a,b,c,d){try{var e=path_to_theme()+"/page.tpl.html";if(drupalgap_file_exists(e)){_drupalgap_goto_query_string=null;"undefined"===typeof c&&(c={});var f={};drupalgap.settings.cache&&"undefined"!==drupalgap.settings.cache.theme_registry&&!drupalgap.settings.cache.theme_registry&&(f.cache=!1);var g=drupalgap_file_get_contents(e,f);if(g){drupalgap_add_page_to_dom({page_id:b,html:g,menu_link:d});drupalgap_path_get()==a&&c.form_submission&&(c.allowSamePageTransition=
!0);d="index.html#"+b;if("phonegap"!=drupalgap.settings.mode||"function"===typeof parent.window.ripple)d="#"+b;$.mobile.changePage(d,c);module_invoke_all("drupalgap_goto_post_process",a)}else drupalgap_alert("drupalgap_goto_generate_page_and_go - "+t("failed to load theme's page.tpl.html file"))}else console.log("drupalgap_goto_generate_page_and_go - page template does not exist! ("+e+")")}catch(h){console.log("drupalgap_goto_generate_page_and_go - "+h)}}
function drupalgap_goto_prepare_path(a){try{return console.log("WARNING - drupalgap_goto_prepare_path() is deprecated, use _drupalgap_goto_prepare_path() instead!"),_drupalgap_goto_prepare_path(a)}catch(b){console.log("drupalgap_goto_prepare_path - "+b)}}
function _drupalgap_goto_prepare_path(a,b){try{if("undefined"!==typeof b&&b){var c=a.indexOf("?");if(-1!=c&&c!=a.length-1){var d=a.substr(c+1,a.length-c);_drupalgap_goto_query_string=d;a=a.substr(0,c);for(var e=d.split("&"),f=0;f<e.length;f++)c=e[f].indexOf("="),-1!=c&&(d=e[f].split("="),2==d.length&&_GET(decodeURIComponent(d[0]),decodeURIComponent(d[1]),a))}}if(""==a)if(drupalgap.settings.front)a=drupalgap.settings.front;else return drupalgap_alert("drupalgap_goto_prepare_path - "+t("no front page specified in settings.js!")),
!1;else"user"==a&&(a=0!=Drupal.user.uid?"user/"+Drupal.user.uid:"user/login");return a}catch(g){console.log("drupalgap_goto_prepare_path - "+g)}}function drupalgap_back(){try{if($(".ui-page-active").attr("id")==drupalgap.settings.front){var a=t("Exit")+" "+drupalgap.settings.title+"?";drupalgap.settings.exit_message&&(a=drupalgap.settings.exit_message);drupalgap_confirm(a,{confirmCallback:_drupalgap_back_exit})}else _drupalgap_back()}catch(b){console.log("drupalgap_back"+b)}}
function _drupalgap_back(){try{drupalgap.back=!0,history.back(),drupalgap_path_set(drupalgap.back_path.pop()),drupalgap_router_path_set(drupalgap_get_menu_link_router_path(drupalgap_path_get()))}catch(a){console.log("drupalgap_back"+a)}}function _drupalgap_back_exit(a){try{1===a?navigator.app.exitApp():""}catch(b){console.log("_drupalgap_back_exit - "+b)}}
$(window).on("navigate",function(a,b){!drupalgap.back&&"web-app"==drupalgap.settings.mode&&"back"==b.state.direction&&0<drupalgap.back_path.length&&(drupalgap.back=!0,drupalgap_path_set(drupalgap.back_path[drupalgap.back_path.length-1]),drupalgap_router_path_set(drupalgap_get_menu_link_router_path(drupalgap_path_get())))});
function _GET(a,b,c){try{var d=!1,e=!1,f=null,g=null;if("undefined"!==typeof b)if(e=!0,g=b,"undefined"!==typeof a)f=a;else return console.log("WARNING: _GET - missing key for value ("+g+")"),null;else"undefined"!==typeof a?(d=!0,f=a):d=!0;if(d){var h=null,h="undefined"!==typeof c?c:drupalgap_get_page_id();if("undefined"!==typeof _dg_GET[h]){if(!f)return _dg_GET[h];if("undefined"!==typeof _dg_GET[h][f])return _dg_GET[h][f]}}else e&&(h=null,h="undefined"!==typeof c?drupalgap_get_page_id(c):drupalgap_get_page_id(),
"undefined"===typeof _dg_GET[h]&&(_dg_GET[h]={}),g&&(_dg_GET[h][f]=g));return null}catch(k){console.log("_GET - "+k)}}
$(document).on("pagebeforechange",function(a,b){try{drupalgap&&drupalgap.back?drupalgap.back=!1:drupalgap_jqm_active_page_url()!=drupalgap_get_page_id(drupalgap_path_get())&&"string"===typeof b.toPage&&(drupalgap&&!drupalgap.page.process?drupalgap.page.process=!0:drupalgap&&(template_preprocess_page(drupalgap.page.variables),template_process_page(drupalgap.page.variables)))}catch(c){console.log("pagebeforechange - "+c)}});
function template_preprocess_page(a){try{"undefined"===typeof a.attributes&&(a.attributes={}),a.attributes["data-role"]="page",module_invoke_all("preprocess_page"),drupalgap.page.variables=a}catch(b){console.log("template_preprocess_page - "+b)}}
function template_process_page(a){try{var b=drupalgap_path_get();drupalgap.output=menu_execute_active_handler();var c=drupalgap_get_page_id(b),d=$("#"+c).html();if(d){for(var e in drupalgap.theme.regions)if(drupalgap.theme.regions.hasOwnProperty(e)){var f=drupalgap.theme.regions[e];a={};$.extend(!0,a,f);d=d.replace("{:"+f.name+":}",drupalgap_render_region(a))}$("#"+c).html(d)}}catch(g){console.log("template_process_page - "+g)}}
function drupalgap_get_page_id(a){try{return a||(a=drupalgap_path_get()),a.toLowerCase().replace(/\//g,"_").replace(/-/g,"_")}catch(b){console.log("drupalgap_get_page_id - "+b)}}
function drupalgap_add_page_to_dom(a){try{var b={id:a.page_id,"data-role":"page"},b=$.extend(!0,b,a.menu_link.options.attributes);b["class"]+=" "+drupalgap_page_class_get(drupalgap.router_path);a.html=a.html.replace(/{:drupalgap_page_attributes:}/g,drupalgap_attributes(b));$("body").append(a.html);drupalgap.pages.push(a.page_id)}catch(c){console.log("drupalgap_add_page_to_dom - "+c)}}
function drupalgap_remove_page_from_dom(a,b,c){try{var d=null,d="undefined"!==typeof c?c:drupalgap_get_page_id(drupalgap_path_get());c={};"undefined"!==typeof b&&(c=b);if(d!=a||c.force){$("#"+a).empty().remove();var e=drupalgap.pages.indexOf(a);-1<e&&drupalgap.pages.splice(e,1);"undefined"===typeof _dg_GET[a]||"undefined"!==typeof c.leaveQuery&&c.leaveQuery||delete _dg_GET[a]}else console.log("WARNING: drupalgap_remove_page_from_dom() - not removing the current page ("+a+") from the DOM!")}catch(f){console.log("drupalgap_remove_page_from_dom - "+
f)}}function drupalgap_remove_pages_from_dom(){try{var a=drupalgap_get_page_id(drupalgap_path_get()),b;for(b in drupalgap.pages)if(drupalgap.pages.hasOwnProperty(b)){var c=drupalgap.pages[b];a!=c&&drupalgap_remove_page_from_dom(c,null,a)}drupalgap.pages=[a];drupalgap.views.ids=[];drupalgap.page.jqm_events=[];drupalgap.back_path=[]}catch(d){console.log("drupalgap_remove_pages_from_dom - "+d)}}
function drupalgap_page_class_get(a){try{for(var b=a.replace(/[\/%]/g,"_");b.lastIndexOf("_")==b.length-1;)b=b.substr(0,b.length-1);return b}catch(c){console.log("drupalgap_page_class_get - "+c)}}function drupalgap_page_in_dom(a){try{var b=$("body div[data-role$='page']"),c=!1;if(b&&0<b.length)for(var d in b)if(b.hasOwnProperty(d)&&$(b[d]).attr("id")==a){c=!0;break}return c}catch(e){console.log("drupalgap_page_in_dom - "+e)}}
function drupalgap_is_front_page(){try{return drupalgap_path_get()==drupalgap.settings.front}catch(a){console.log("drupalgap_is_front_page - "+a)}}function drupalgap_jqm_active_page_url(){try{return $.mobile.activePage?$.mobile.activePage.data("url"):""}catch(a){console.log("drupalgap_jqm_active_page_url - "+a)}}
function drupalgap_render_page(){try{var a=drupalgap.output,b=$.type(a),c="";if("string"===b)c=a;else if("object"===b){b=["theme","view_mode","language"];if(a.theme&&drupalgap.theme_registry[a.theme]){var d=drupalgap.theme_registry[a.theme],e=a.theme.replace(/_/g,"-")+".tpl.html",f=d.path+"/"+e;if(drupalgap_file_exists(f)){var g=drupalgap_file_get_contents(f);if(g){var h=drupalgap_get_placeholders_from_html(g);if(h)for(var k in h)if(h.hasOwnProperty(k)){var m=h[k],d="";if(a[m]){var n=a[m];a[m].markup?
d=a[m].markup:a[m].theme&&(d=theme(a[m].theme,n));delete a[m]}g=g.replace("{:"+m+":}",d)}c+=g}else console.log("drupalgap_render_page - failed to get file contents ("+f+")")}else console.log("drupalgap_render_page - template file does not exist ("+f+")")}for(n in a)if(a.hasOwnProperty(n)){var q=a[n];-1==$.inArray(n,b)&&(c+=theme(q.theme,q))}}return c}catch(p){console.log("drupalgap_render_page - "+p)}}
function drupalgap_render_region(a){try{if(!drupalgap.settings.blocks[drupalgap.settings.theme])return console.log('WARNING: drupalgap_render_region() - there are no blocks for the "'+drupalgap.settings.theme+'" theme in the settings.js file!'),"";var b=drupalgap_path_get(),c="",c=c+_drupalgap_region_render_zone("_prefix",a,b);if(drupalgap.settings.blocks[drupalgap.settings.theme][a.name]){a.attributes["class"]||(a.attributes["class"]="");a.attributes["class"]+=" region_"+a.name+" ";var c=c+("<div "+
drupalgap_attributes(a.attributes)+">"),d=0,e=0;if(a.links&&0<a.links.length){var f=0,g=0,h;for(h in a.links)if(a.links.hasOwnProperty(h)){var k=a.links[h],m=menu_region_link_get_data(k);if(drupalgap_check_visibility("region",m)){d++;var n=drupalgap_link_get_class(k);if(n){var q=menu_region_link_get_side(n);"left"==q?f++:"right"==q&&g++}}}for(var k=h="",p=0;p<a.links.length;p++){var r=a.links[p],m=menu_region_link_get_data(r);if(drupalgap_check_visibility("region",m)&&!in_array(b,["offline","error",
"user/logout"])){var s=r.title,u=r.path;m.options.popup?(e++,s&&!empty(s)||"undefined"!==typeof m.options.attributes["data-iconpos"]||(m.options.attributes["data-iconpos"]="notext"),"undefined"===typeof m.options.attributes["data-rel"]&&(m.options.attributes["data-rel"]="popup"),"undefined"===typeof m.options.attributes["data-icon"]&&(m.options.attributes["data-icon"]="bars"),"undefined"===typeof m.options.attributes["data-role"]&&(m.options.attributes["data-role"]="button"),u=null,m.options.attributes.href=
"#"+menu_container_id(m.options.popup_delta)):"undefined"===typeof m.options.attributes["data-role"]&&(m.options.attributes["data-role"]="button");"notext"==m.options.attributes["data-iconpos"]&&(s="&nbsp;");var n=drupalgap_link_get_class(r),q=menu_region_link_get_side(n),x=l(s,u,m.options);"left"==q?h+=x:"right"==q&&(k+=x)}}if(1<f){var v={"data-type":"horizontal","data-role":"controlgroup","class":"ui-btn-left"};h="<div "+drupalgap_attributes(v)+">"+h.replace(/ui-btn-left/g,"")+"</div>"}1<g&&(v=
{"data-type":"horizontal","data-role":"controlgroup","class":"ui-btn-right"},k="<div "+drupalgap_attributes(v)+">"+k.replace(/ui-btn-right/g,"")+"</div>");c+=h+k}var f={block_count:0,block_menu_count:0},y=drupalgap.settings.blocks[drupalgap.settings.theme][a.name],w;for(w in y)if(y.hasOwnProperty(w)){var z=y[w];"_prefix"!=w&&"_suffix"!=w&&(c+=drupalgap_block_render(a,b,w,z,f))}if(in_array(a.attributes["data-role"],["header","footer"])&&(0==f.block_count&&0<d||0==f.block_count-f.block_menu_count)||
0<d&&e>=f.block_menu_count&&0==f.block_count)if("undefined"===typeof a.collapse_on_empty||!1===a.collapse_on_empty)c+="<h2>&nbsp;</h2>";c+="</div>\x3c!-- "+a.name+" --\x3e"}return c+=_drupalgap_region_render_zone("_suffix",a,b)}catch(A){console.log("drupalgap_render_region - "+A)}}
function _drupalgap_region_render_zone(a,b,c){try{var d="",e=drupalgap.settings.blocks[drupalgap.settings.theme][b.name];if("undefined"===typeof e[a])return d;var f=e[a],g;for(g in f)f.hasOwnProperty(g)&&(d+=drupalgap_block_render(b,c,g,f[g]));return d}catch(h){console.log("_drupalgap_region_render_zone - "+h)}}function drupalgap_panel_id(a){try{return a+"_"+drupalgap_get_page_id()}catch(b){console.log("drupalgap_panel_id - "+b)}}
function menu_execute_active_handler(a){try{var b=null;a&&(b=a);b||(b=drupalgap_path_get());var c=drupalgap_get_page_id(b),d=drupalgap_router_path_get();if(d){var e=drupalgap.menu_links[d].page_callback;a=[];if(drupalgap_function_exists(e)){var f=window[e],e="";if(drupalgap.menu_links[d].page_arguments){var g=arg(null,b),h;for(h in drupalgap.menu_links[d].page_arguments)if(drupalgap.menu_links[d].page_arguments.hasOwnProperty(h)){var k=drupalgap.menu_links[d].page_arguments[h];is_int(k)&&g[k]?a.push(g[k]):
a.push(k)}e=f.apply(null,Array.prototype.slice.call(a))}else e=f();"string"===typeof e&&(e={content:{markup:e}});drupalgap.page.jqm_events=[];var m=drupalgap_jqm_page_events(),f=null;0<a.length&&(f=JSON.stringify(a));for(a=0;a<m.length;a++)if(drupalgap.menu_links[d][m[a]]){var n=m[a],q=drupalgap.menu_links[d][n];if(drupalgap_function_exists(q)){var p={page_id:c,jqm_page_event:n,jqm_page_event_callback:q,jqm_page_event_args:f};e[n]={markup:drupalgap_jqm_page_event_script_code(p)}}else console.log("menu_execute_active_handler ("+
b+") - the jQM "+n+" call back function "+q+" does not exist!")}"object"===typeof e&&(p={page_id:c,jqm_page_event:"pageshow",jqm_page_event_callback:"_drupalgap_page_title_pageshow",jqm_page_event_args:f},e.drupalgap_page_title_pageshow={markup:drupalgap_jqm_page_event_script_code(p)});return e}console.log("menu_execute_active_handler - no page callback ("+d+")");console.log(JSON.stringify(drupalgap.menu_links[d]))}}catch(r){console.log("menu_execute_active_handler("+b+") - "+r)}}
function menu_get_item(a,b){try{var c=null;a&&(c=a);return c&&drupalgap.menu_links[c]?drupalgap.menu_links[c]:null}catch(d){console.log("menu_get_item - "+d)}}function menu_item_default_options(){return{attributes:menu_item_default_attributes()}}function menu_item_default_attributes(){return{"class":""}}
function menu_list_system_menus(){try{var a={user_menu_anonymous:{title:t("User menu authenticated")},user_menu_authenticated:{title:t("User menu authenticated")},main_menu:{title:t("Main menu")},primary_local_tasks:{title:t("Primary Local Tasks")}},b;for(b in a)a.hasOwnProperty(b)&&(a[b].menu_name=b);return a}catch(c){console.log("menu_list_system_menus - "+c)}}
function menu_router_build(){try{var a=module_implements("menu"),b,c,d,e;for(e in a)if(a.hasOwnProperty(e)){var f=a[e];b=f+"_menu";c=window[b];d=c();for(var g in d)if(d.hasOwnProperty(g)){var h=d[g];h.module=f;"undefined"===typeof h.type&&(h.type="MENU_NORMAL_ITEM");"undefined"===typeof h.options?h.options=menu_item_default_options():"undefined"===typeof h.options.attributes&&(h.options.attributes=menu_item_default_attributes());h.path=g;drupalgap_menu_router_build_menu_item_relationships(g,h);drupalgap.menu_links[g]=
h}}}catch(k){console.log("menu_router_build - "+k)}}
function drupalgap_get_menu_link_router_path(a){try{if(drupalgap.menu_links[a])return"undefined"===typeof drupalgap.menu_links[a].router_path?a:drupalgap.menu_links[a].router_path;var b=null,c=arg(null,a);if(c){var d=c.length;switch(c[0]){case "comment":case "user":case "node":1<d&&is_int(parseInt(c[1]))&&(c[1]="%",b=c.join("/"));break;case "taxonomy":2<d&&("vocabulary"==c[1]||"term"==c[1])&&is_int(parseInt(c[2]))&&(c[2]="%",b=c.join("/"));break;default:1<d&&is_int(parseInt(c[1]))&&(c[1]="%",b=c.join("/"))}}if(!b&&
c&&1<c.length)for(var e,f=c.length-1;-1!=f;f--){e="";for(d=0;d<c.length;d++)e=d<f?e+c[d]:e+"%",d!=c.length-1&&(e+="/");if(drupalgap.menu_links[e]){b=e;break}}drupalgap.menu_links[b]&&"MENU_DEFAULT_LOCAL_TASK"==drupalgap.menu_links[b].type&&drupalgap.menu_links[b].parent&&(b=drupalgap.menu_links[b].parent);b||(b=a);return b}catch(g){console.log("drupalgap_get_menu_link_router_path - "+g)}}
function drupalgap_menus_load(){try{if(drupalgap.settings.menus){for(var a in drupalgap.settings.menus)if(drupalgap.settings.menus.hasOwnProperty(a)){var b=drupalgap.settings.menus[a];if(drupalgap.menus[a])$.extend(!0,drupalgap.menus[a],b);else if(b.menu_name||(b.menu_name=a),"regions"!=a){menu_save(b);var c=b.menu_name;drupalgap.blocks[0][c]={name:c,delta:c,module:"menu"}}}for(var d in drupalgap.menu_links)if(drupalgap.menu_links.hasOwnProperty(d)){var e=drupalgap.menu_links[d];if(e.menu_name)if(drupalgap.menus[e.menu_name]){drupalgap.menus[e.menu_name].links||
(drupalgap.menus[e.menu_name].links=[]);e.path=d;var f=drupalgap_menus_load_convert_menu_link_to_link_json(e);drupalgap.menus[e.menu_name].links.push(f)}else console.log("drupalgap_menus_load - menu does not exist ("+e.menu_name+"), cannot attach link to it ("+d+")");e.region&&(drupalgap.theme.regions[e.region.name].links||(drupalgap.theme.regions[e.region.name].links=[]),drupalgap.theme.regions[e.region.name].links.push(e))}if("undefined"!==typeof drupalgap.settings.menus.regions)for(var g in drupalgap.settings.menus.regions)if(drupalgap.settings.menus.regions.hasOwnProperty(g)&&
(b=drupalgap.settings.menus.regions[g],"undefined"!==typeof b.links&&$.isArray(b.links)&&0<b.links.length)){drupalgap.theme.regions[g].links||(drupalgap.theme.regions[g].links=[]);for(var h in b.links)b.links.hasOwnProperty(h)&&(f=b.links[h],drupalgap.theme.regions[g].links.push(f))}}}catch(k){console.log("drupalgap_menus_load - "+k)}}
function drupalgap_menus_load_convert_menu_link_to_link_json(a){try{var b={};a.title&&(b.title=a.title,b.text=a.title);a.path&&(b.path=a.path);a.options&&(b.options=a.options);a.region&&a.region.options&&(b.options=a.options=a.region.options);return b}catch(c){console.log("drupalgap_menus_load_convert_menu_link_to_link_json - "+c)}}
function drupalgap_menu_router_build_menu_item_relationships(a,b){try{var c=arg(null,a);if(1<c.length){var d=c.splice(0,c.length-1).join("/");b.parent=d;if(drupalgap.menu_links[d]){"undefined"===typeof drupalgap.menu_links[d].children&&(drupalgap.menu_links[d].children=[]);drupalgap.menu_links[d].children.push(a);"undefined"===typeof b.siblings&&(b.siblings=[]);for(var e in drupalgap.menu_links[d].children)if(drupalgap.menu_links[d].children.hasOwnProperty(e)){var f=drupalgap.menu_links[d].children[e];
f!=a&&drupalgap.menu_links[f]&&("undefined"===typeof drupalgap.menu_links[f].siblings&&(drupalgap.menu_links[f].siblings=[]),drupalgap.menu_links[f].siblings.push(a),b.siblings.push(f))}}}}catch(g){console.log("drupalgap_menu_router_build_relationships - "+g)}}function path_to_theme(){try{if(drupalgap.theme_path)return drupalgap.theme_path;console.log("path_to_theme - drupalgap.theme_path is not set!");return!1}catch(a){console.log("path_to_theme - "+a)}}
function theme(a,b){try{b||(b={});if(b.markup)return b.markup;var c="",d=drupalgap.settings.theme+"_"+a;if(!function_exists(d)&&(d="theme_"+a,!function_exists(d))){var e=null;arguments.callee.caller&&(e=arguments.callee.caller.name);d="WARNING: "+d+"() does not exist.";e&&(d+=" Called by: "+e+"().");console.log(d);return c}"undefined"!==typeof b.attributes&&b.attributes||(b.attributes=b.options&&b.options.attributes?b.options.attributes:{});b.attributes["class"]||(b.attributes["class"]="");return c=
window[d].call(null,b)}catch(f){console.log("theme - "+f)}}function theme_button(a){try{return a.attributes["data-role"]="button","<a "+drupalgap_attributes(a.attributes)+">"+a.text+"</a>"}catch(b){console.log("theme_button_link - "+b)}}function theme_button_link(a){try{return a.attributes["data-role"]="button",theme_link(a)}catch(b){console.log("theme_button_link - "+b)}}
function theme_collapsible(a){try{a.attributes["data-role"]="collapsible";var b="h2";a.header_type&&(b=a.header_type);var c={};a.header_attributes&&(c=a.header_attributes);return"<div "+drupalgap_attributes(a.attributes)+"><"+b+" "+drupalgap_attributes(c)+">"+a.header+"</"+b+">"+a.content+"</div>"}catch(d){console.log("theme_collapsible - "+d)}}
function theme_collapsibleset(a){try{a.attributes["data-role"]="collapsible-set";var b="<div "+drupalgap_attributes(a.attributes)+">",c;for(c in a.items)a.items.hasOwnProperty(c)&&(b+=theme("collapsible",a.items[c]));return b+"</div>"}catch(d){console.log("theme_collapsibleset - "+d)}}
function theme_controlgroup(a){try{a.attributes["data-role"]="controlgroup";var b="<div "+drupalgap_attributes(a.attributes)+">",c;for(c in a.items)a.items.hasOwnProperty(c)&&(b+=a.items[c]);return b+"</div>"}catch(d){console.log("theme_controlgroup - "+d)}}function theme_header(a){try{return a.attributes["data-role"]="header","undefined"===typeof a.type&&(type="h2"),"<div "+drupalgap_attributes(a.attributes)+"><"+type+">"+a.text+"</"+type+"></div>"}catch(b){console.log("theme_header - "+b)}}
function theme_image(a){try{return a.path&&(a.attributes.src=a.path),a.alt&&(a.attributes.alt=a.alt),a.title&&(a.attributes.title=a.title),"<img "+drupalgap_attributes(a.attributes)+" />"}catch(b){console.log("theme_image - "+b)}}function theme_audio(a){try{return a.path&&(a.attributes.src=a.path),a.alt&&(a.attributes.alt=a.alt),a.title&&(a.attributes.title=a.title),"<audio controls "+drupalgap_attributes(a.attributes)+"></audio>"}catch(b){console.log("theme_audio - "+b)}}
function theme_video(a){try{return a.path&&(a.attributes.src=a.path),a.alt&&(a.attributes.alt=a.alt),a.title&&(a.attributes.title=a.title),"<video controls "+drupalgap_attributes(a.attributes)+"></video>"}catch(b){console.log("theme_video - "+b)}}function theme_image_style(a){try{return a.path=image_style_url(a.style_name,a.path),theme_image(a)}catch(b){console.log("theme_image - "+b)}}
function theme_item(a){try{var b="",c;for(c in a.item)a.item.hasOwnProperty(c)&&(b+="<h2>"+a.model.fields[c].title+"</h2><p>"+a.item[c]+"</p>");return b}catch(d){console.log("theme_item - "+d)}}
function theme_item_list(a){try{var b="ul";a.type&&(b=a.type);var c="";a.title&&(c+="<h2>"+a.title+"</h2>");c+="<"+b+" "+drupalgap_attributes(a.attributes)+">";if(a.items&&0<a.items.length){var d="undefined"!==typeof a.attributes["data-role"]&&"listview"==a.attributes["data-role"],e;for(e in a.items)if(a.items.hasOwnProperty(e)){var f=a.items[e],g=null,c=c+"<li";d&&(g=$(f).attr("data-icon"))&&(c+=' data-icon="'+g+'"');c+=">"+f+"</li>"}}return c+("</"+b+">")}catch(h){console.log("theme_item_list - "+
h)}}function theme_jqm_item_list(a){try{return a.attributes?a.attributes["data-role"]&&"listview"!=a.attributes["data-role"]||(a.attributes["data-role"]="listview"):a.attributes["data-role"]="listview",theme_item_list(a)}catch(b){console.log("theme_jqm_item_list - "+b)}}
function theme_link(a){try{var b="";a.text&&(b=a.text);if("undefined"!==typeof a.path&&null!=a.path){if(0==a.path.indexOf("#"))return a.attributes.href=a.path,"<a "+drupalgap_attributes(a.attributes)+">"+b+"</a>";var c="drupalgap_goto('"+a.path+"');";if(a.options)if(a.options.InAppBrowser)c="window.open('"+a.path+"', '_blank', 'location=yes');";else{a.path=_drupalgap_goto_prepare_path(a.path);var d="",e;for(e in a.options)if(a.options.hasOwnProperty(e)){var f=a.options[e];"attributes"!=e&&("string"===
typeof f&&(f="'"+f+"'"),d+=e+":"+f+",")}c="drupalgap_goto('"+a.path+"', {"+d+"});"}a.path==drupalgap_path_get()&&(-1==a.attributes["class"].indexOf("ui-btn-active")&&(a.attributes["class"]+=" ui-btn-active "),-1==a.attributes["class"].indexOf("ui-state-persist")&&(a.attributes["class"]+=" ui-state-persist "));return'<a href="#" onclick="javascript:'+c+'"'+drupalgap_attributes(a.attributes)+">"+b+"</a>"}"undefined"===typeof a.attributes.href&&(a.attributes.href="#");return"<a "+drupalgap_attributes(a.attributes)+
">"+b+"</a>"}catch(g){console.log("theme_link - "+g)}}function theme_logout(a){try{return bl(t("Logout"),"user/logout",{attributes:{"data-icon":"action","data-iconpos":"right"}})}catch(b){console.log("theme_logout - "+b)}}
function theme_popup(a){try{a.attributes["data-role"]="popup";var b={};a.button_attributes&&(b=a.button_attributes);b.href="#"+a.attributes.id;b["data-rel"]="popup";return bl(a.button_text,null,{attributes:b})+"<div "+drupalgap_attributes(a.attributes)+">"+a.content+"</div>"}catch(c){console.log("theme_popup - "+c)}}function theme_submit(a){try{return"<button "+drupalgap_attributes(a.attributes)+">"+a.element.value+"</button>"}catch(b){console.log("theme_submit - "+b)}}
function theme_table(a){try{var b="<table "+drupalgap_attributes(a.attributes)+">";if(a.header){var b=b+"<thead><tr>",c;for(c in a.header)if(a.header.hasOwnProperty(c)){var d=a.header[c];d.data&&(b+="<td>"+d.data+"</td>")}b+="</tr></thead>"}b+="<tbody>";if(a.rows)for(var e in a.rows)if(a.rows.hasOwnProperty(e)){var f=a.rows[e],b=b+"<tr>";if(f)for(var g in f)f.hasOwnProperty(g)&&(d=f[g],b+="<td>"+d+"</td>");b+="</tr>"}return b+"</tbody></table>"}catch(h){console.log("theme_table - "+h)}}
function theme_jqm_table(a){try{return a.attributes["data-role"]="table",a.attributes["data-mode"]="reflow",theme_table(a)}catch(b){console.log("theme_jqm_table - "+b)}}
function _drupalgap_page_title_pageshow(a){try{var b=drupalgap_router_path_get();a=[];"undefined"!==typeof drupalgap.menu_links[b].title&&drupalgap_set_title(drupalgap.menu_links[b].title);if("undefined"!==typeof drupalgap.menu_links[b].title_callback){var c=drupalgap.menu_links[b].title_callback;if(drupalgap_function_exists(c)){var d=window[c];a.unshift(_drupalgap_page_title_pageshow_success);if(drupalgap.menu_links[b].title_arguments){var e=arg(null,drupalgap_path_get()),f=drupalgap.menu_links[b].title_arguments,
g;for(g in f)if(f.hasOwnProperty(g)){var h=f[g];is_int(h)&&e[h]?a.push(e[h]):a.push(h)}}drupalgap_set_title(d.apply(null,Array.prototype.slice.call(a)))}}else _drupalgap_page_title_pageshow_success(drupalgap_get_title())}catch(k){console.log("_drupalgap_page_title_pageshow - "+k)}}function _drupalgap_page_title_pageshow_success(a){try{var b=system_title_block_id(drupalgap_path_get());$("h1#"+b).html(a)}catch(c){console.log("_drupalgap_page_title_pageshow_success - "+c)}}
function comment_menu(){return{"comment/%":{title:t("Comment"),page_callback:"comment_page_view",page_arguments:[1],pageshow:"comment_page_view_pageshow",title_callback:"comment_page_title",title_arguments:[1]},"comment/%/view":{title:t("View"),type:"MENU_DEFAULT_LOCAL_TASK",weight:-10},"comment/%/edit":{title:t("Edit"),page_callback:"entity_page_edit",pageshow:"entity_page_edit_pageshow",page_arguments:["comment_edit","comment",1],weight:0,type:"MENU_LOCAL_TASK",access_callback:"comment_access",
access_arguments:[1],options:{reloadPage:!0}}}}function comment_access(a){try{return a.uid==Drupal.user.uid&&user_access("edit own comments")||user_access("administer comments")?!0:!1}catch(b){console.log("comment_access - "+b)}}function comments_container_id(a){return"comments_container_"+a}function comment_container_id(a){return"comment_container_"+a}function comment_list_id(a){try{return comments_container_id(a)}catch(b){console.log("comment_list_id - "+b)}}
function comment_page_view(a){try{if(a)return{container:_drupalgap_entity_page_container("comment",a,"view")};drupalgap_error(t("No comment id provided!"))}catch(b){console.log("comment_page_view - "+b)}}function comment_page_view_pageshow(a){try{comment_load(a,{success:function(b){b=theme("comment",{comment:b});b=theme("jqm_item_list",{items:[b]});_drupalgap_entity_page_container_inject("comment",a,"view",b)}})}catch(b){console.log("comment_page_view_pageshow - "+b)}}
function comment_page_title(a,b){try{var c="";comment_load(b,{success:function(b){b&&b.subject&&(c=b.subject);a.call(null,c)}})}catch(d){console.log("comment_page_title - "+d)}}
function comment_edit(a,b,c,d){try{c||(c={nid:arg(1)});b=null;b=d&&d.type?d.type:c.node_type.replace("comment_node_","");d="comment_node_"+b;a.entity_type="comment";a.bundle=d;a.action="node/"+c.nid;drupalgap_entity_add_core_fields_to_form("comment",d,a,c);drupalgap_field_info_instances_add_to_form("comment",d,a,c);a.elements.submit={type:"submit",value:t("Save")};var e=t("Add comment");c&&c.cid&&(e=t("Edit comment"),a.buttons.cancel=drupalgap_form_cancel_button(),a.buttons["delete"]=drupalgap_entity_edit_form_delete_button("comment",
c.cid));a.prefix+="<h2>"+e+"</h2>";return a}catch(f){console.log("comment_edit - "+f)}}function comment_edit_submit(a,b){try{var c=drupalgap_entity_build_from_form_state(a,b);drupalgap_entity_form_submit(a,b,c)}catch(d){console.log("comment_edit_submit - "+d)}}
function comment_services_postprocess(a,b){try{if("comment"==a.service&&"create"==a.resource){var c=drupalgap_path_get();if("node/%"==drupalgap_get_menu_link_router_path(c)){var d=arg(1),e=comments_container_id(d),f=$("#"+e);"undefined"!==typeof f.length&&0==f.length||node_load(d,{reset:!0,success:function(a){comment_load(b.cid,{success:function(a){$(f).append(theme("comment",{comment:a})).trigger("create");scrollToElement("#"+e+" :last-child",500);a="#"+drupalgap_get_page_id()+" #comment_edit";drupalgap_form_clear(a)}})}})}}}catch(g){console.log("comment_services_postprocess - "+
g)}}function theme_comments(a){try{a.attributes.id=comments_container_id(a.node.nid);a.attributes["class"]+="comments comments-node-"+a.node.type;a.attributes["data-role"]="collapsible-set";var b="<div "+drupalgap_attributes(a.attributes)+">";0<a.node.comment_count&&(b+='<h2 class="comments-title">Comments</h2>');a.comments&&(b+=a.comments);return b+"</div>"}catch(c){console.log("theme_comments - "+c)}}
function theme_comment(a){try{var b=a.comment;a.attributes.id=comment_container_id(b.cid);a.attributes["class"]+="comment ";a.attributes["data-role"]="collapsible";a.attributes["data-collapsed"]="false";var c="<div "+drupalgap_attributes(a.attributes)+">",d=a="";b.picture_uri&&(d+=theme("image",{path:drupalgap_image_path(b.picture_uri)}));var e=new Date(1E3*b.created),e=e.toLocaleDateString()+" at "+e.toLocaleTimeString(),f=d+"<h3>"+b.name+"</h3><p>"+e+"</p>",f=l(f,"user/"+b.uid);a+="<h2>"+b.subject+
'</h2><ul data-role="listview" data-inset="true"><li>'+f+"</li></ul>"+b.content;c+=a;if(user_access("administer comments")||user_access("edit own comments")&&b.uid==Drupal.user.uid)c+=theme("button_link",{text:t("Edit"),path:"comment/"+b.cid+"/edit",attributes:{"data-icon":"gear"}});return c+"</div>"}catch(g){console.log("theme_comment - "+g)}}
function contact_menu(){try{var a={};a.contact={title:t("Contact"),page_callback:"drupalgap_get_form",page_arguments:["contact_site_form"],pageshow:"contact_site_form_pageshow",access_arguments:["access site-wide contact form"]};a["user/%/contact"]={title:t("User contact"),page_callback:"drupalgap_get_form",page_arguments:["contact_personal_form",1],pageshow:"contact_personal_form_pageshow",access_arguments:["access user contact forms"],weight:10,type:"MENU_LOCAL_TASK"};return a}catch(b){console.log("contact_menu - "+
b)}}function contact_index(a){try{a.method="GET",a.path="contact.json",a.service="contact",a.resource="index",Drupal.services.call(a)}catch(b){console.log("contact_index - "+b)}}function contact_site(a){try{a.method="POST",a.path="contact/site.json",a.service="contact",a.resource="site",Drupal.services.call(a)}catch(b){console.log("contact_site - "+b)}}
function contact_personal(a){try{a.method="POST",a.path="contact/personal.json",a.service="contact",a.resource="personal",Drupal.services.call(a)}catch(b){console.log("contact_personal - "+b)}}
function contact_site_form(a,b){try{return a.elements.name={title:t("Your name"),type:"textfield",required:!0},a.elements.mail={title:t("Your e-mail address"),type:"email",required:!0},a.elements.subject={title:t("Subject"),type:"textfield",required:!0},a.elements.category={title:t("Category"),type:"select",required:!0},a.elements.message={title:t("Message"),type:"textarea",required:!0},a.elements.copy={title:t("Send yourself a copy?"),type:"checkbox",default_value:0,access:!1},a.elements.submit=
{type:"submit",value:t("Send message")},0!=Drupal.user.uid&&(a.elements.name.default_value=Drupal.user.name,a.elements.name.disabled=!0,a.elements.mail.default_value=Drupal.user.mail,a.elements.mail.disabled=!0,a.elements.copy.access=!0),a}catch(c){console.log("contact_site_form - "+c)}}
function contact_site_form_pageshow(){try{contact_index({success:function(a){if(a&&a.length){for(var c in a)if(a.hasOwnProperty(c)){var d=a[c],d='<option value="'+d.cid+'" '+(1==d.selected?"selected":"")+">"+d.category+"</option>";$("#edit-contact-site-form-category").append(d)}$("#edit-contact-site-form-category").selectmenu("refresh");1==a.length&&$("#contact_site_form .field-name-category").hide()}}})}catch(a){console.log("contact_site_form_pageshow - "+a)}}
function contact_site_form_submit(a,b){contact_site({data:JSON.stringify({name:b.values.name,mail:b.values.mail,subject:b.values.subject,category:b.values.category,message:b.values.message,copy:b.values.copy}),success:function(a){a[0]?drupalgap_alert(t("Your message has been sent!")):drupalgap_alert(t("There was a problem sending your message!"),{title:t("Error")});drupalgap_form_clear()},error:function(a,b,e){if(e&&(e=JSON.parse(e),e.form_errors)){a="";for(var f in e.form_errors)e.form_errors.hasOwnProperty(f)&&
(a+=e.form_errors[f]+"\n");""!=a&&drupalgap_alert(a)}}})}
function contact_personal_form(a,b,c){try{a.elements.name={title:t("Your name"),type:"textfield",required:!0};a.elements.mail={title:t("Your e-mail address"),type:"email",required:!0};a.elements.to={type:"hidden",required:!0};var d=contact_personal_form_to_container_id(c);a.elements.to_display={title:"To",markup:'<div id="'+d+'"></div>'};a.elements.subject={title:t("Subject"),type:"textfield",required:!0};a.elements.message={title:t("Message"),type:"textarea",required:!0};a.elements.copy={title:t("Send yourself a copy?"),
type:"checkbox",default_value:0,access:!1};a.elements.submit={type:"submit",value:t("Send message")};0!=Drupal.user.uid&&(a.elements.name.default_value=Drupal.user.name,a.elements.name.disabled=!0,a.elements.mail.default_value=Drupal.user.mail,a.elements.mail.disabled=!0,a.elements.copy.access=!0);return a}catch(e){console.log("contact_personal_form - "+e)}}
function contact_personal_form_pageshow(a,b){try{user_load(b,{success:function(a){if(a.data.contact){var c=contact_personal_form_to_container_id(b);$("#"+c).html(l(a.name,"user/"+a.uid));c="#"+drupalgap_get_page_id()+" #edit-contact-personal-form-to";$(c).val(a.name)}else $("#"+drupalgap_get_page_id()+" #drupalgap_form_errors").html("<div class='messages warning'>"+t("Sorry, this user's contact form is disabled.")+"</div>")}})}catch(c){console.log("contact_personal_form_pageshow - "+c)}}
function contact_personal_form_submit(a,b){contact_personal({data:JSON.stringify({name:b.values.name,mail:b.values.mail,to:b.values.to,subject:b.values.subject,category:b.values.category,message:b.values.message,copy:b.values.copy}),success:function(a){a[0]?drupalgap_alert(t("Your message has been sent!")):drupalgap_alert(t("There was a problem sending your message!"),{title:t("Error")});drupalgap_form_clear()},error:function(a,b,e){if(e&&(e=JSON.parse(e),e.form_errors)){a="";for(var f in e.form_errors)e.form_errors.hasOwnProperty(f)&&
(a+=e.form_errors[f]+"\n");""!=a&&drupalgap_alert(a)}}})}function contact_personal_form_to_container_id(a){return"contact_personal_form_user_"+a}function drupalgap_entity_add_core_fields_to_form(a,b,c,d){try{var e=drupalgap_entity_get_core_fields(a,b),f;for(f in e)if(e.hasOwnProperty(f)){var g=e[f],h=g.default_value;d&&d[f]&&(h=d[f]);c.elements[f]=g;c.elements[f].default_value=h}}catch(k){console.log("drupalgap_entity_add_core_fields_to_form - "+k)}}
function drupalgap_entity_assemble_data(a,b,c,d){try{console.log("WARNING: drupalgap_entity_assemble_data() has been deprecated! Now just call e.g. node_save() for auto assembly.")}catch(e){console.log("drupalgap_entity_assemble_data - "+e)}}function drupalgap_entity_edit_form_delete_button(a,b){return{title:t("Delete"),attributes:{onclick:"javascript:drupalgap_entity_edit_form_delete_confirmation('"+a+"', "+b+");"}}}
function drupalgap_entity_edit_form_delete_confirmation(a,b){try{var c=t("Delete this content, are you sure? This action cannot be undone...");drupalgap_confirm(c,{confirmCallback:function(c){2!=c&&(drupalgap.loader="deleting",c=services_get_resource_function_for_entity(a,"delete"),(0,window[c])(b,{success:function(c){c=drupalgap_get_page_id(a+"/"+b);drupalgap_page_in_dom(c)&&drupalgap_remove_page_from_dom(c);window.localStorage.removeItem(entity_local_storage_key(a,b));c=drupalgap_form_local_storage_load("node_edit");
drupalgap_goto(c.action?c.action:"",{reloadPage:!0,form_submission:!0})}}))}})}catch(d){console.log("drupalgap_entity_edit_form_delete_confirmation - "+d)}}
function drupalgap_entity_render_content(a,b){try{b.content="";var c=b.type;"comment"==a?c=b.bundle:"taxonomy_term"==a&&(c=b.vocabulary_machine_name);var d=drupalgap_field_info_instances(a,c);if(d){var e={},f={},g;for(g in d)if(d.hasOwnProperty(g)){var h=d[g];if(!h.display)break;var k=h.display["default"];h.display.drupalgap&&(k=h.display.drupalgap,"undefined"===typeof k.module&&"undefined"!==typeof h.display["default"].module&&(k.module=h.display["default"].module));"hidden"!=k.type&&(f[g]=k,e[g]=
k.weight)}h=[];for(g in e)if(e.hasOwnProperty(g)){var m=e[g];h.push(m)}h.sort(function(a,b){return a-b});var k=[],n;for(n in h)if(h.hasOwnProperty(n)){var q=h[n];for(g in e)if(e.hasOwnProperty(g)&&(m=e[g],q==m&&-1==k.indexOf(g))){k.push(g);b.content+=drupalgap_entity_render_field(a,b,g,d[g],f[g]);break}}module_invoke_all("entity_post_render_content",b,a,c);_entity_local_storage_save(a,b[entity_primary_key(a)],b)}}catch(p){console.log("drupalgap_entity_render_content - "+p)}}
function drupalgap_entity_render_field(a,b,c,d,e){try{var f="",g=e.module;if(!g)if(d.widget.module)g=d.widget.module;else return console.log("drupalgap_entity_render_field - unable to locate the module for the field ("+c+")"),f;g+="_field_formatter_view";if(drupalgap_function_exists(g)){var h=window[g],g=null,k=language_default(),m=b.language;b[c]&&(b[c][k]?g=b[c][k]:b[c][m]?g=b[c][m]:b[c].und?(g=b[c].und,m="und"):g=b[c]);var n=h(a,b,d,drupalgap_field_info_field(c),m,g,e),q;for(q in n)if(n.hasOwnProperty(q)){var p=
n[q];a="";p.markup?a=p.markup:p.theme&&(a=theme(p.theme,p));f+=a}}else console.log("WARNING: drupalgap_entity_render_field - "+g+"() does not exist! ("+c+")");if(""!=f&&"hidden"!=e.label){var r="<h3>"+d.label+"</h3>",r="<div>"+r+"</div>";switch(e.label){case "below":f+=r;break;default:f=r+f}}f='<div class="'+c+'">'+f+"</div>";e={content:f};module_invoke_all("entity_post_render_field",b,c,d,e);return e.content!=f?e.content:f}catch(s){console.log("drupalgap_entity_render_field - "+s)}}
function drupalgap_entity_build_from_form_state(a,b){try{var c={},d=language_default(),e;for(e in b.values)if(b.values.hasOwnProperty(e)){var f=b.values[e];if("undefined"===typeof a.elements[e].access||a.elements[e].access){var g=!1,h=!1,k=!1;a.elements[e].is_field&&(g=!0,h=a.elements[e].field_info_field.module,k=h+"_assemble_form_state_into_field",function_exists(k)||(k=!1));var m=drupalgap_field_key(e);if(m){var n=a.elements[e].field_info_field.cardinality;-1==n&&(n=1);if("undefined"!==typeof f[d][0]){c[e]=
{};h=!0;"taxonomy_term_reference"==a.elements[e].type||"options_select"==a.elements[e].field_info_instance.widget.type?(h=!1,c[e][d]={}):c[e][d]=[];for(var q=0;q<n;q++)if("undefined"!==typeof f[d][q]){var p=f[d][q],r={value:"value",use_key:!0,use_wrapper:!0,use_delta:h,name:e,form_id:a.id,element_id:a.elements[e][d][q].id};g&&k&&(p=(0,window[k])(a.entity_type,a.bundle,p,a.elements[e].field_info_field,a.elements[e].field_info_instance,d,q,r));m!=r.value&&(m=r.value);if(r.use_delta)if(r.use_key){var s=
{};s[m]=p;c[e][d].push(s)}else c[e][d].push(p);else r.use_wrapper?$.isArray(c[e][d])?(console.log("WARNING: drupalgap_entity_build_from_form_state - cannot use key ("+m+") on field ("+e+") language code array, key will be ignored."),c[e][d].push(p)):c[e][d][m]=p:c[e][d]=p;null===p&&"undefined"!==typeof c[e]&&"list_boolean"!=a.elements[e].type&&delete c[e];!g||h||"options_select"!=a.elements[e].field_info_instance.widget.type||a.elements[e].required||""!==p||"undefined"===typeof c[e]||delete c[e]}}}else"undefined"!==
typeof f&&(c[e]=f)}}return c}catch(u){console.log("drupalgap_entity_build_from_form_state - "+u)}}
function drupalgap_entity_form_submit(a,b,c){try{var d=entity_primary_key(a.entity_type),e=!1;c[d]&&""!=c[d]&&(e=!0);drupalgap.loader="saving";var f="create";e&&(f="update",window.localStorage.removeItem(entity_local_storage_key(a.entity_type,c[d])));(0,window[services_get_resource_function_for_entity(a.entity_type,f)])(c,{success:function(b){try{var c=a.action;if(!c){var e=a.entity_type;if("taxonomy_vocabulary"==e||"taxonomy_term"==e)e=e.replace("_","/");c=e+"/"+b[d]}_GET("destination")&&(c=_GET("destination"));
b={form_submission:!0};a.action_options&&(b=$.extend({},b,a.action_options));drupalgap_goto(c,b)}catch(f){console.log("drupalgap_entity_form_submit - success - "+f)}},error:function(c,d,e){try{var f=_drupalgap_form_submit_response_errors(a,b,c,d,e);f&&drupalgap_alert(f)}catch(g){console.log("drupalgap_entity_form_submit - error - "+g)}}})}catch(g){console.log("drupalgap_entity_form_submit - "+g)}}
function drupalgap_entity_get_core_fields(a,b){try{var c={};switch(a){case "comment":var d=b.replace("comment_node_",""),e=drupalgap.entity_info[a].schema_fields_sql["base table"],f;for(f in e)if(e.hasOwnProperty(f)){var g=e[f],h={type:"hidden",required:!1,default_value:"",title:ucfirst(g)};c[g]=h}c.nid.required=!0;c.name.type="textfield";0!=Drupal.user.uid&&(c.name.default_value=Drupal.user.name,c.name.disabled=!0);drupalgap.content_types_list[d].comment_subject_field&&(c.subject.type="textfield");
var k=drupalgap.content_types_list[d].comment_anonymous;switch(k){case "0":delete c.mail;delete c.homepage;break;case "1":break;case "2":c.mail.required=!0;c.homepage.required=!0;break;default:console.log("WARNING: drupalgap_entity_get_core_fields - Unknown anonymous comment setting ("+d+"): "+k)}0==Drupal.user.uid&&(c.mail&&(c.mail.type="textfield"),c.homepage&&(c.homepage.type="textfield"));break;case "node":c.nid={type:"hidden",required:!1,default_value:""};c.title={type:"textfield",title:t("Title"),
required:!0,default_value:"",description:""};c.type={type:"hidden",required:!0,default_value:""};c.language={type:"hidden",required:!0,default_value:language_default()};break;case "user":c.uid={type:"hidden",required:!1,default_value:""};c.name={type:"textfield",title:t("Username"),required:!0,default_value:"",description:""};c.mail={type:"email",title:t("E-mail address"),required:!0,default_value:"",description:""};c.picture={type:"image",widget_type:"imagefield_widget",title:t("Picture"),required:!1,
value:t("Add Picture")};break;case "taxonomy_term":c={vid:{type:"hidden",required:!0,default_value:""},tid:{type:"hidden",required:!1,default_value:""},name:{type:"textfield",title:t("Name"),required:!0,default_value:""},description:{type:"textarea",title:t("Description"),required:!1,default_value:""}};break;case "taxonomy_vocabulary":c={vid:{type:"hidden",required:!1,default_value:""},name:{type:"textfield",title:t("Name"),required:!0,default_value:""},machine_name:{type:"textfield",title:t("Machine Name"),
required:!0,default_value:""},description:{type:"textarea",title:t("Description"),required:!1,default_value:""}};break;default:console.log("drupalgap_entity_get_core_fields - entity type not supported yet ("+a+")")}return c}catch(m){console.log("drupalgap_entity_get_core_fields - "+m)}}function drupalgap_entity_get_info(a){try{return a?a&&drupalgap.entity_info[a]?drupalgap.entity_info[a]:!1:drupalgap.entity_info}catch(b){console.log("drupalgap_entity_get_info - "+b)}}
function drupalgap_entity_get_primary_key(a){try{return console.log("WARNING: drupalgap_entity_get_primary_key() is deprecated! Use entity_primary_key() instead."),entity_primary_key(a)}catch(b){console.log("drupalgap_entity_get_primary_key - "+b)}}function _drupalgap_entity_page_container(a,b,c){try{var d={id:_drupalgap_entity_page_container_id(a,b,c),"class":a+" "+a+"-"+c};return{markup:"<div "+drupalgap_attributes(d)+"></div>"}}catch(e){console.log("_drupalgap_entity_page_container - "+e)}}
function _drupalgap_entity_page_container_id(a,b,c){return a+"_"+b+"_"+c+"_container"}function _drupalgap_entity_page_container_inject(a,b,c,d){try{var e=_drupalgap_entity_page_container_id(a,b,c);drupalgap.output=d;$("#"+e).html(drupalgap_render_page()).trigger("create")}catch(f){console.log("_drupalgap_entity_page_container_inject - "+f)}}function entity_page_edit(a,b,c){try{return{container:_drupalgap_entity_page_container(b,c,"edit")}}catch(d){console.log("entity_page_edit - "+d)}}
function entity_page_edit_pageshow(a,b,c){try{entity_load(b,c,{success:function(d){_drupalgap_entity_page_container_inject(b,c,"edit",drupalgap_get_form(a,d))}})}catch(d){console.log("entity_page_edit_pageshow - "+d)}}
function entity_primary_key_title(a){try{var b;switch(a){case "comment":b="subject";break;case "file":b="filename";break;case "node":b="title";break;case "taxonomy_term":b="name";break;case "taxonomy_vocabulary":b="name";break;case "user":b="name";break;default:console.log("entity_primary_key_title - unsupported entity type ("+a+")")}return b}catch(c){console.log("entity_primary_key_title - "+c)}}
function entity_services_request_pre_postprocess_alter(a,b){try{if("retrieve"==a.resource&&in_array(a.service,entity_types()))"undefined"===typeof b.content&&drupalgap_entity_render_content(a.service,b);else if("comment"==a.service&&"index"==a.resource)for(var c in b)b.hasOwnProperty(c)&&"undefined"===typeof b[c].content&&drupalgap_entity_render_content(a.service,b[c])}catch(d){console.log("entity_services_request_pre_postprocess_alter - "+d)}}
function drupalgap_field_info_field(a){try{return drupalgap.field_info_fields[a]}catch(b){console.log("drupalgap_field_info_field - "+b)}}function drupalgap_field_info_fields(){try{return drupalgap.field_info_fields}catch(a){console.log("drupalgap_field_info_fields - "+a)}}
function drupalgap_field_info_instance(a,b,c){try{var d=drupalgap_field_info_instances(a,c);return d?d[b]?d[b]:(console.log('WARNING: drupalgap_field_info_instance - "'+b+'" does not exist for entity ('+a+") bundle ("+c+")"),null):(console.log("WARNING: drupalgap_field_info_instance - instance was null for entity ("+a+") bundle ("+c+") using field ("+b+")"),null)}catch(e){console.log("drupalgap_field_info_instance - "+e)}}
function drupalgap_field_info_instances(a,b){try{var c;b?"undefined"!==typeof drupalgap.field_info_instances[a]&&(c=drupalgap.field_info_instances[a][b]):c="commerce_product"==a?drupalgap.field_info_instances[a]:drupalgap.field_info_instances[a][a];return c}catch(d){console.log("drupalgap_field_info_instances - "+d)}}
function drupalgap_field_info_instances_add_to_form(a,b,c,d){try{var e=drupalgap_field_info_instances(a,b),f=language_default();d&&d.language&&(f=d.language);if(e)for(var g in e)if(e.hasOwnProperty(g)){var h=e[g];if("user_register_form"!=c.id||h.settings.user_register_form){var k=drupalgap_field_info_field(g);if(k){c.elements[g]={type:k.type,title:h.label,required:h.required,description:h.description};c.elements[g][f]||(c.elements[g][f]={});var m=h.default_value,n=0,q=parseInt(k.cardinality);-1==
q&&(q=1);if(d&&d[g]&&0!=d[g].length&&d[g][f])for(n=0;n<q;n++)d[g][f][n]&&"undefined"!==typeof d[g][f][n].value&&(m=d[g][f][n].value),null==m&&(m=""),c.elements[g][f][n]={value:m},d[g][f][n]&&(c.elements[g][f][n].item=d[g][f][n]);var p=h.widget.module+"_field_info_instance_add_to_form";if(drupalgap_function_exists(p))window[p](a,b,c,d,c.elements[g])}}}}catch(r){console.log("drupalgap_field_info_instances_add_to_form - "+r)}}
function drupalgap_field_key(a){try{var b=!1,c=drupalgap_field_info_field(a);c&&(b="value","image"==c.module&&"image"==c.type?b="fid":"taxonomy"==c.module&&"taxonomy_term_reference"==c.type&&(b="tid"));return b}catch(d){console.log("drupalgap_field_key - "+d)}}
function list_field_formatter_view(a,b,c,d,e,f,g){try{a={};if(!empty(f))for(var h in f)if(f.hasOwnProperty(h)){var k=f[h];b="";"list_default"==g.type?(b=d.settings.allowed_values[k.value],"list_boolean"==d.type&&"options_onoff"==c.widget.type&&(b="&nbsp;")):b=k.value;a[h]={markup:b}}return a}catch(m){console.log("list_field_formatter_view - "+m)}}
function list_assemble_form_state_into_field(a,b,c,d,e,f,g,h){try{b=c;switch(d.type){case "list_boolean":if("options_onoff"==e.widget.type){a=0;e=!0;for(var k in d.settings.allowed_values)if(d.settings.allowed_values.hasOwnProperty(k)){if(c==k&&0==a){e=!1;break}a++}e||(h.use_delta=!1,h.use_wrapper=!1,b=null)}else console.log("WARNING: list_assemble_form_state_into_field - unknown widget ("+d.type+") on list_boolean");break;case "list_text":"user"==a&&"options_buttons"==e.widget.type&&(h.use_delta=
!1,h.use_wrapper=!1);break;default:console.log("WARNING: list_assemble_form_state_into_field - unknown type ("+d.type+")")}return b}catch(m){console.log("list_assemble_form_state_into_field - "+m)}}
function list_views_exposed_filter(a,b,c,d,e){try{var f=d.options.group_info.widget;"select"==f?(empty(d.value)||(c.value=d.value[0]),c.options=d.value_options,c.required||(c.options.All="- "+t("Any")+" -","undefined"===typeof c.value&&(c.value="All"))):dpm("WARNING: list_views_exposed_filter - unsupported widget ("+f+")")}catch(g){console.log("list_views_exposed_filter - "+g)}}
function number_field_formatter_view(a,b,c,d,e,f,g){try{a={};"string"===typeof f&&(f={0:{value:f}});if(!empty(f)){b="";empty(c.settings.prefix)||(b=c.settings.prefix);d="";empty(c.settings.suffix)||(d=c.settings.suffix);for(var h in f)f.hasOwnProperty(h)&&(a[h]={markup:b+f[h].value+d})}return a}catch(k){console.log("number_field_formatter_view - "+k)}}
function number_field_widget_form(a,b,c,d,e,f,g,h){try{switch(h.type){case "number_integer":case "number_float":case "number_decimal":case "range":"range"!=h.type&&(f[g].type="number");empty(d.settings.max)||(f[g].options.attributes.min=d.settings.min);empty(d.settings.max)||(f[g].options.attributes.max=d.settings.max);a=1;"number_float"==h.type&&(a=.01);"number_decimal"==h.type&&(a=.01);f[g].options.attributes.step=a;break;default:console.log("number_field_widget_form - element type not supported ("+
h.type+")")}}catch(k){console.log("number_field_widget_form - "+k)}}
function options_field_widget_form(a,b,c,d,e,f,g,h){try{switch(h.type){case "checkbox":1==f[g].default_value&&(f[g].checked=!0);break;case "list_boolean":switch(d.widget.type){case "options_onoff":f[g].type="checkbox";h=d=null;if($.isArray(c.settings.allowed_values))for(var k in c.settings.allowed_values)null===d?d=k:h=k;else for(var m in c.settings.allowed_values)c.settings.allowed_values.hasOwnProperty(m)&&(null===d?d=m:h=m);f[g].options.attributes.off=d;f[g].options.attributes.on=h;"undefined"!==
typeof f[g]&&f[g].value==h&&(f[g].options.attributes.checked="checked");break;default:console.log("WARNING: options_field_widget_form list_boolean with unsupported type ("+d.widget.type+")")}break;case "select":case "list_text":case "list_float":case "list_integer":if(d){switch(d.widget.type){case "options_select":f[g].type="select";var n="- None -";f[g].required&&(n="- "+t("Select a value")+" -");f[g].options[""]=n;empty(f[g].value)&&(f[g].value="");1!=c.cardinality&&(f[g].options.attributes["data-native-menu"]=
"false",f[g].options.attributes.multiple="multiple");break;case "options_buttons":h="checkboxes";1==c.cardinality&&(h="radios");f[g].type=h;break;default:return console.log("WARNING: options_field_widget_form - unsupported widget ("+d.widget.type+")"),!1}if(c&&c.settings.allowed_values){for(k in c.settings.allowed_values)if(c.settings.allowed_values.hasOwnProperty(k)&&(m=c.settings.allowed_values[k],"object"!==typeof m)){if("undefined"!==typeof f[g].options[k])break;f[g].options[k]=m}d.default_value&&
d.default_value[g]&&"undefined"!==typeof d.default_value[g].value&&(f[g].value=d.default_value[g].value)}}break;case "taxonomy_term_reference":f[g].type="hidden";var q=taxonomy_vocabulary_machine_name_load(c.settings.allowed_values[0].vocabulary);k=!1;if("options_select"==d.widget.type)k="select";else return console.log("WARNING: options_field_widget_form() - "+d.widget.type+" not yet supported for "+h.type+" form elements!"),!1;var p=f[g].id+"-"+k,n="- "+t("None")+" -";f[g].required&&(n="- "+t("Select a value")+
" -");f[g].children.push({type:k,attributes:{id:p,onchange:"_theme_taxonomy_term_reference_onchange(this, '"+f[g].id+"');"},options:{"":n}});var r={page_id:drupalgap_get_page_id(drupalgap_path_get()),jqm_page_event:"pageshow",jqm_page_event_callback:"_theme_taxonomy_term_reference_load_items",jqm_page_event_args:JSON.stringify({taxonomy_vocabulary:q,widget_id:p})};f[g].children.push({markup:drupalgap_jqm_page_event_script_code(r,c.field_name)})}}catch(s){console.log("options_field_widget_form - "+
s)}}function text_field_formatter_view(a,b,c,d,e,f,g){try{a={};if(!empty(f))for(var h in f)if(f.hasOwnProperty(h)){var k=f[h],m=k.value;"undefined"!==typeof k.safe_value&&(m=k.safe_value);a[h]={markup:m}}return a}catch(n){console.log("text_field_formatter_view - "+n)}}
function text_field_widget_form(a,b,c,d,e,f,g,h){try{a=null;switch(h.type){case "search":a="search";break;case "text":a="textfield";break;case "textarea":case "text_long":case "text_with_summary":case "text_textarea":a="textarea"}f[g].type=a}catch(k){console.log("text_field_widget_form - "+k)}}
function file_entity_field_formatter_view(a,b,c,d,e,f,g){try{if("file_rendered"==g.type)return media_field_formatter_view(a,b,c,d,e,f,g);for(var h in f)if(f.hasOwnProperty(h))switch(g.type){default:console.log("file_entity_field_formatter_view() - unsupported display type: "+g.type)}return{}}catch(k){console.log("file_entity_field_formatter_view - "+k)}}var image_phonegap_camera_options={};
function image_field_formatter_view(a,b,c,d,e,f,g){try{a={};if(!empty(f))for(var h in f)if(f.hasOwnProperty(h)){var k=f[h],m=empty(g.settings.image_style)?"image":"image_style",n={theme:m,alt:k.alt,title:k.title};empty(m)?n.path=drupalgap_image_path(k.uri):(n.style_name=g.settings.image_style,n.path=k.uri);a[h]=n}return a}catch(q){console.log("image_field_formatter_view - "+q)}}
function image_field_widget_form(a,b,c,d,e,f,g,h){try{f[g].type="hidden";"user_profile_form"==a.id&&"picture"==h.name&&(c={field_name:"picture"});if("undefined"!==typeof f[g].item&&f[g].item.fid){f[g].value=f[g].item.fid;var k=drupalgap_image_path(f[g].item.uri),m=theme("image",{path:k})+'<div class="filename">'+l(f[g].item.filename,k,{InAppBrowser:!0})+"</div>"}else{var n=t("Take Photo");f[g].value&&(n=f[g].value);var q=t("Browse");f[g].value2&&(q=f[g].value2);var p=f[g].id.replace(/-/g,"_");a=p+
"_imagefield_source";b=p+"_imagefield_destination_type";d=p+"_imagefield_data";eval("var "+a+" = null;");eval("var "+b+" = null;");eval("var "+d+" = null;");var r=f[g].id+"-browse-button",m='<div><div id="'+f[g].id+'-imagefield-msg"></div><img id="'+f[g].id+'-imagefield" style="display: none;" /><a href="#" data-role="button" data-icon="camera" id="'+f[g].id+'-button">'+n+'</a><a href="#" data-role="button" data-icon="grid" id="'+r+'">'+q+"</a></div>",m=m+'<script type="text/javascript">',n=p+"_imagefield_ready",
m=m+('$("#'+drupalgap_get_page_id(drupalgap_path_get())+'").on("pageshow",function(){document.addEventListener("deviceready", '+n+", false);});function "+n+"() {"+a+" = navigator.camera.PictureSourceType;"+b+" = navigator.camera.DestinationType;}"),n=p+"_error",m=m+("function "+n+'(message) {if (message != "Camera cancelled." && message != "Selection cancelled." && message != "no image selected"){console.log("'+n+'");drupalgap_alert(message);}}'),p=p+"_success",m=m+("function "+p+'(imageData) {_image_phonegap_camera_getPicture_success({field_name:"'+
c.field_name+'", image:imageData, id:"'+f[g].id+'"})}');c=50;drupalgap.settings.camera.quality&&(c=drupalgap.settings.camera.quality);m+='$("#'+f[g].id+'-button").on("click",function(){var photo_options = {quality: '+c+",destinationType: "+b+".DATA_URL,correctOrientation: true};navigator.camera.getPicture("+p+", "+n+", photo_options);});";m+='$("#'+r+'").on("click",function(){var browse_photo_options = {quality: '+c+",sourceType: "+a+".PHOTOLIBRARY,destinationType: "+b+".DATA_URL,correctOrientation: true};navigator.camera.getPicture("+
p+", "+n+", browse_photo_options);});";m+="\x3c/script>"}f[g].children.push({markup:m})}catch(s){console.log("image_field_widget_form - "+s)}}function _image_field_widget_form_remove_image(){try{alert("_image_field_widget_form_remove_image")}catch(a){console.log("_image_field_widget_form_remove_image - "+a)}}
function image_fields_present_on_entity_type(a,b){try{var c=[],d=drupalgap_field_info_instances(a,b);if(!d)return!1;for(var e in d)if(d.hasOwnProperty(e)){var f=d[e];f.widget&&f.widget.type&&"image_image"==f.widget.type&&c.push(e)}return 0==c.length?!1:c}catch(g){console.log("image_fields_present_on_entity_type - "+g)}}
function image_form_alter(a,b,c){try{if(a.entity_type){var d=image_fields_present_on_entity_type(a.entity_type,a.bundle);if(d&&(a.image_fields=d,$.isArray(d)))for(var e in d)d.hasOwnProperty(e)&&(image_phonegap_camera_options[d[e]]={0:null})}}catch(f){console.log("image_form_alter - "+f)}}
function image_style_url(a,b){try{var c=Drupal.settings.site_path+Drupal.settings.base_path+b;-1!=c.indexOf("public://")?c=c.replace("public://",Drupal.settings.file_public_path+"/styles/"+a+"/public/"):-1!=c.indexOf("private://")&&(c=c.replace("private://",Drupal.settings.file_private_path+"/styles/"+a+"/private/"));return c}catch(d){console.log("image_style_url - "+d)}}
function _image_phonegap_camera_getPicture_success(a){try{image_phonegap_camera_options[a.field_name]={0:a};var b=a.id+"-imagefield",c=document.getElementById(b);c.src="data:image/jpeg;base64,"+image_phonegap_camera_options[a.field_name][0].image;c.onload=function(){var a=this.width,d=this.height,g=a/drupalgap_max_width();c.width=a/g;c.height=d/g;$("#"+b).show()}}catch(d){console.log("_image_phonegap_camera_getPicture_success - "+d)}}
function _image_field_form_process(a,b,c){try{var d=language_default(),e=!1,f;for(f in a.image_fields)if(a.image_fields.hasOwnProperty(f)){var g=a.image_fields[f];if(!image_phonegap_camera_options[g][0])break;if(""!=b.values[g][d][0])break;var h=Drupal.user.uid+"_"+(new Date).valueOf()+".jpg",k={file:{file:image_phonegap_camera_options[g][0].image,filename:h,filepath:"public://"+h}};empty(Drupal.settings.file_private_path)||(k.file.filepath="private://"+h);drupalgap.loader="saving";e=!0;file_save(k,
{async:!1,success:function(e){try{var f=drupalgap_form_get_element_id(g,a.id);$("#"+f).val(e.fid);b.values[g][d][0]=e.fid;c.success&&c.success()}catch(h){console.log("_image_field_form_process - success - "+h)}}})}!e&&c.success&&c.success()}catch(m){console.log("_image_field_form_validate - "+m)}}function image_assemble_form_state_into_field(a,b,c,d,e,f,g,h){try{return h.value="fid",c}catch(k){console.log("image_assemble_form_state_into_field - "+k)}}
function menu_block_view(a,b){try{var c=drupalgap.menus[a],d=menu_container_id(a),e=null;b.attributes&&b.attributes["data-role"]&&(e=b.attributes["data-role"]);var f={};"undefined"!==typeof c.options&&"undefined"!==typeof c.options.wrap&&c.options.wrap&&c.options.wrap_options&&c.options.wrap_options.attributes&&(f=c.options.wrap_options.attributes);f.id=d;return"<div "+drupalgap_attributes(f)+"></div>"+drupalgap_jqm_page_event_script_code({page_id:drupalgap_get_page_id(),jqm_page_event:"pageshow",
jqm_page_event_callback:"menu_block_view_pageshow",jqm_page_event_args:JSON.stringify({menu_name:a,container_id:d,"data-role":e})},a)}catch(g){console.log("menu_block_view - "+g)}}
function menu_block_view_pageshow(a){try{var b="",c=drupalgap_path_get(),d=a.menu_name;if("primary_local_tasks"==d){var e=drupalgap_router_path_get();if(drupalgap.menu_links[e]){d=null;drupalgap.menu_links[e].parent&&(d=drupalgap.menu_links[e].parent);var f=null;drupalgap.menu_links[e].children?f=drupalgap.menu_links[e].children:d&&drupalgap.menu_links[d]&&drupalgap.menu_links[d].children&&(f=drupalgap.menu_links[d].children);var g=arg(),d=function(c){try{var d=[];if(f&&!empty(f))for(var g in f)if(f.hasOwnProperty(g)){var h=
f[g];!drupalgap.menu_links[h]||"MENU_DEFAULT_LOCAL_TASK"!=drupalgap.menu_links[h].type&&"MENU_LOCAL_TASK"!=drupalgap.menu_links[h].type||drupalgap_menu_access(h,null,c)&&d.push(drupalgap.menu_links[h])}if(1==d.length&&"MENU_DEFAULT_LOCAL_TASK"==d[0].type)b="";else{c=[];for(g in d)if(d.hasOwnProperty(g)){var k=jQuery.extend(!0,{},d[g]);k.options?k.options.attributes||(k.options.attributes={}):k.options={attributes:{}};var m=k.path;"MENU_DEFAULT_LOCAL_TASK"==k.type&&k.parent&&(m=k.parent,k.path=arg(null,
k.parent).join("/"));m==e&&(k.options.attributes["class"]||(k.options.attributes["class"]=""),k.options.attributes["class"]+=" ui-btn ui-btn-active ui-state-persist ");c.push(l(k.title,drupalgap_place_args_in_path(k.path),k.options))}0<c.length&&(b=theme("item_list",{items:c}))}$("#"+a.container_id).html(b).trigger("create");a["data-role"]&&"navbar"==a["data-role"]&&$("#"+a.container_id).navbar();var n=drupalgap.menus[a.menu_name];"undefined"===typeof n.options||"undefined"!==typeof n.options.wrap&&
n.options.wrap||$("#"+a.container_id).children().unwrap()}catch(p){console.log("menu_block_view_pageshow - success - "+p)}},h=c=!1;if(f)for(var k in f)if(f.hasOwnProperty(k)){var m=f[k];!drupalgap.menu_links[m]||"MENU_DEFAULT_LOCAL_TASK"!=drupalgap.menu_links[m].type&&"MENU_LOCAL_TASK"!=drupalgap.menu_links[m].type||(drupalgap_path_has_entity_arg(arg(null,m))&&(c=!0),"undefined"!==typeof drupalgap.menu_links[m].access_callback&&(h=!0))}if(c&&h){m=!1;k=null;for(c=0;c<g.length;c++)if(is_int(parseInt(g[c]))){k=
c;m=!0;break}if(m){var n=g[0];"taxonomy"!=g[0]||"vocabulary"!=g[1]&&"term"!=g[1]||(n=g[0]+"_"+g[1]);n+="_load";if(drupalgap_function_exists(n)){var q=window[n],p=parseInt(g[k]);"item"==g[0]?(entity=q(g[1],g[2],p),d(entity)):(g=!1,"edit"==arg(2)&&(g=!0),q(p,{reset:g,success:d}))}else console.log("menu_block_view_pageshow - load function not implemented! "+n)}else d(null)}else d(null)}}else{q=!1;if(drupalgap.menus[d]&&drupalgap.menus[d].links){q=drupalgap.menus[d];p=[];for(k in q.links)q.links.hasOwnProperty(k)&&
(h=jQuery.extend(!0,{},q.links[k]),h.options?h.options.attributes||(h.options.attributes={}):h.options={attributes:{}},h.path==c&&(h.options.attributes["class"]||(h.options.attributes["class"]=""),h.options.attributes["class"]+=" ui-btn ui-btn-active ui-state-persist "),p.push(l(t(h.title),h.path,h.options)));0<p.length&&(g=null,q.options&&q.options.attributes&&(g=drupalgap.menus[d].options.attributes),b=theme("item_list",{items:p,attributes:g}))}$("#"+a.container_id).html(b).trigger("create");p=
!1;q&&"undefined"!==typeof q.options&&"undefined"!==typeof q.options.wrap&&q.options.wrap&&(p=!0);p||$("#"+a.container_id).children().unwrap()}}catch(r){console.log("menu_block_view_pageshow - "+r)}}function menu_install(){try{var a=menu_list_system_menus(),b;for(b in a)a.hasOwnProperty(b)&&menu_save(a[b])}catch(c){console.log("menu_install - "+c)}}function menu_popup_get_default_options(){return{attributes:{"data-role":"listview"},wrap:!0,wrap_options:{attributes:{"data-role":"popup"}}}}
function menu_region_link_get_data(a){try{var b=null;return b="undefined"===typeof a.region?a:a.region}catch(c){console.log("menu_region_link_get_data - "+c)}}function menu_region_link_get_side(a){try{var b="left";-1!=a.indexOf("ui-btn-right")&&(b="right");return b}catch(c){console.log("menu_region_link_get_side - "+c)}}function menu_save(a){try{drupalgap.menus[a.menu_name]=a}catch(b){console.log("menu_save - "+b)}}
function menu_load(a){try{return"undefined"!==typeof drupalgap.menus[a]?drupalgap.menus[a]:null}catch(b){console.log("menu_load - "+b)}}function menu_container_id(a,b){try{var c=null,c=b?b:drupalgap_get_page_id();return c+"_menu_"+a}catch(d){console.log("menu_container_id - "+d)}}
function collection_list_page(a,b){try{var c={collection_list:{theme:"jqm_item_list",title:t("Collection")}},d=[],e=collection_load(a,b);if(e){for(var f in e)e.hasOwnProperty(f)&&d.push(l(e[f].name,"mvc/item/"+a+"/"+b+"/"+f));c.collection_list.items=d}return c}catch(g){console.log("collection_list_page - "+g)}}function collection_load(a,b){try{return JSON.parse(window.localStorage.getItem(mvc_get_collection_key("collection",a,b)))}catch(c){console.log("collection_load - "+c)}}
function collection_save(a,b,c){try{window.localStorage.setItem(mvc_get_collection_key("collection",a,b),JSON.stringify(c))}catch(d){console.log("collection_save - "+d)}}function mvc_get_collection_key(a,b,c){return"mvc_"+a+"_"+b+"_"+c}
function mvc_install(){try{for(var a=module_implements("mvc_model"),b=0;b<a.length;b++){var c=a[b],d=module_invoke(c,"mvc_model");if(d){drupalgap.mvc.models[c]||(drupalgap.mvc.models[c]={});for(var e in d)if(d.hasOwnProperty(e)){var f=d[e];f.fields.id={type:"hidden",title:t("ID"),required:!1};f.fields.module={type:"hidden",title:t("Module"),required:!0,default_value:c};f.fields.type={type:"hidden",title:t("Model Type"),required:!0,default_value:e};drupalgap.mvc.models[c][e]=f;var g=mvc_get_collection_key("collection",
c,e);window.localStorage.getItem(g)||(window.localStorage.setItem(g,"[]"),window.localStorage.setItem(mvc_get_collection_key("settings",c,e),'{"auto_increment":0}'))}}}}catch(h){console.log("mvc_install - "+h)}}
function mvc_menu(){return{"mvc/collection/list/%/%":{page_callback:"collection_list_page",page_arguments:[3,4]},"mvc/item/%/%/%":{page_callback:"item_view_page",page_arguments:[2,3,4]},"mvc/item-add/%/%":{title:t("Add"),page_callback:"drupalgap_get_form",page_arguments:["item_create_form",2,3]}}}function mvc_model_system_fields(){return["id","module","type"]}
function model_load(a,b){try{return"undefined"===drupalgap.mvc.models[a]||"undefined"===drupalgap.mvc.models[a][b]?!1:drupalgap.mvc.models[a][b]}catch(c){console.log("model_load - "+c)}}function item_create_form(a,b,c,d){try{var e=model_load(c,d);e&&(a.elements=e.fields,a.buttons.cancel=drupalgap_form_cancel_button(),a.elements.submit={type:"submit",value:t("Create")});return a}catch(f){console.log("item_create_form - "+f)}}
function item_create_form_submit(a,b){try{if(item_save(b.values)){var c="mvc/collection/list/"+b.values.module+"/"+b.values.type;a.action&&(c=a.action);drupalgap_goto(c,{reloadPage:!0})}else drupalgap_alert("item_create_form_submit - failed to save item!")}catch(d){console.log("item_create_form_submit - "+d)}}function item_load(a,b,c){try{var d=!1,e=collection_load(a,b);e&&"undefined"!==typeof e[c]&&(d=e[c]);return d}catch(f){console.log("item_load - "+f)}}
function item_save(a){try{if("undefined"===typeof a)return!1;var b=mvc_get_collection_key("settings",a.module,a.type),c=JSON.parse(window.localStorage.getItem(b));a.id||(a.id=c.auto_increment);var d=collection_load(a.module,a.type);d[a.id]=a;collection_save(a.module,a.type,d);c.auto_increment=a.id+1;window.localStorage.setItem(b,JSON.stringify(c));return!0}catch(e){console.log("item_save - "+e)}}
function item_view_page(a,b,c){try{var d="",e=model_load(a,b);e&&(d=theme("item",{model:e,item:c}));return d}catch(f){console.log("item_view_page - "+f)}}function node_access(a){try{return a.uid==Drupal.user.uid&&user_access("edit own "+a.type+" content")||user_access("edit any "+a.type+" content")?!0:!1}catch(b){console.log("node_access - "+b)}}
function node_add_page(){try{var a={header:{markup:"<h2>"+t("Create Content")+"</h2>"},node_type_listing:{theme:"jqm_item_list",title:t("Content Types"),attributes:{id:"node_type_listing_items"}}},b=[],c=Drupal.user.content_types_user_permissions,d;for(d in c)c.hasOwnProperty(d)&&c[d].create&&b.push(l(drupalgap.content_types_list[d].name,"node/add/"+d));a.node_type_listing.items=b;return a}catch(e){console.log("node_add_page - "+e)}}
function node_add_page_by_type(a){try{return drupalgap_get_form("node_edit",{type:a})}catch(b){console.log("node_add_page_by_type - "+b)}}function node_add_page_by_type_title(a,b){try{var c=t("Create")+" "+drupalgap.content_types_list[b].name;return a.call(null,c)}catch(d){console.log("node_add_page_by_type_title - "+d)}}
function node_edit(a,b,c){try{return a.entity_type="node",a.bundle=c.type,drupalgap_entity_add_core_fields_to_form("node",c.type,a,c),drupalgap_field_info_instances_add_to_form("node",c.type,a,c),a.elements.submit={type:"submit",value:t("Save")},a.buttons.cancel=drupalgap_form_cancel_button(),c&&c.nid&&(a.buttons["delete"]=drupalgap_entity_edit_form_delete_button("node",c.nid)),a}catch(d){console.log("node_edit - "+d)}}
function node_edit_submit(a,b){try{var c=drupalgap_entity_build_from_form_state(a,b);drupalgap_entity_form_submit(a,b,c)}catch(d){console.log("node_edit_submit - "+d)}}
function node_menu(){return{node:{title:t("Content"),page_callback:"node_page",pageshow:"node_page_pageshow"},"node/add":{title:t("Add content"),page_callback:"node_add_page"},"node/add/%":{title:t("Add content"),title_callback:"node_add_page_by_type_title",title_arguments:[2],page_callback:"node_add_page_by_type",page_arguments:[2],options:{reloadPage:!0}},"node/%":{title:t("Node"),page_callback:"node_page_view",page_arguments:[1],pageshow:"node_page_view_pageshow",title_callback:"node_page_title",
title_arguments:[1]},"node/%/view":{title:t("View"),type:"MENU_DEFAULT_LOCAL_TASK",weight:-10},"node/%/edit":{title:t("Edit"),page_callback:"entity_page_edit",pageshow:"entity_page_edit_pageshow",page_arguments:["node_edit","node",1],weight:0,type:"MENU_LOCAL_TASK",access_callback:"node_access",access_arguments:[1],options:{reloadPage:!0}}}}
function node_page(){return{create_content:{theme:"button_link",path:"node/add",text:t("Create Content")},node_listing:{theme:"jqm_item_list",title:t("Content List"),items:[],attributes:{id:"node_listing_items"}}}}
function node_page_pageshow(){try{views_datasource_get_view_result("drupalgap/views_datasource/drupalgap_content",{success:function(a){var c=[],d;for(d in a.nodes)if(a.nodes.hasOwnProperty(d)){var e=a.nodes[d];c.push(l(e.node.title,"node/"+e.node.nid))}drupalgap_item_list_populate("#node_listing_items",c)}})}catch(a){console.log("node_page_pageshow - "+a)}}
function node_page_view(a){try{if(a)return{container:_drupalgap_entity_page_container("node",a,"view")};drupalgap_error(t("No node id provided!"))}catch(b){console.log("node_page_view - "+b)}}
function node_page_view_pageshow(a){try{node_load(a,{success:function(a){var b="node_page_view_alter_"+a.type,e=module_implements(b);if(0<e.length)1<e.length&&console.log("node_page_view_pageshow - WARNING - there is more than one module implementing hook_"+b+"(), we will use the first one: "+e[0]),(0,window[e[0]+"_"+b])(a,{success:function(b){_drupalgap_entity_page_container_inject("node",a.nid,"view",b)}});else{b=language_default();e=a.title;a.title_field&&a.title_field[b]&&(e=a.title_field[b][0].safe_value);
var f={theme:"node",node:a,title:{markup:e},content:{markup:a.content}};if("undefined"===typeof a.comment)_drupalgap_entity_page_container_inject("node",a.nid,"view",f);else if(0!=a.comment){if(1==a.comment||2==a.comment){var g="";2==a.comment&&(g=drupalgap_get_form("comment_edit",{nid:a.nid},a));0!=a.comment_count?comment_index({parameters:{nid:a.nid}},{success:function(b){try{var d="",e;for(e in b)b.hasOwnProperty(e)&&(d+=theme("comment",{comment:b[e]}));f.content.markup+=theme("comments",{node:a,
comments:d});2==a.comment&&(f.content.markup+=g);_drupalgap_entity_page_container_inject("node",a.nid,"view",f)}catch(n){console.log("node_page_view_pageshow - comment_index - "+n)}}}):(2==a.comment&&(f.content.markup+=theme("comments",{node:a}),f.content.markup+=g),_drupalgap_entity_page_container_inject("node",a.nid,"view",f))}}else f.content.markup+=theme("comments",{node:a}),_drupalgap_entity_page_container_inject("node",a.nid,"view",f)}}})}catch(b){console.log("node_page_view_pageshow - "+b)}}
function node_page_title(a,b){try{var c="";node_load(b,{success:function(b){b&&b.title&&(c=b.title);a.call(null,c)}})}catch(d){console.log("node_page_title - "+d)}}function node_theme(){return{node:{template:"node"}}}function search_block_info(){return{search:{delta:"search",module:"search"}}}function search_block_view(a,b){try{var c="";"search"==a&&user_access("search content")&&(c=drupalgap_get_form("search_block_form"));return c}catch(d){console.log("search_block_view - "+d)}}
function search_menu(){try{var a={};a["search/%/%"]={title:t("Search"),page_callback:"drupalgap_get_form",pageshow:"search_form_pageshow",page_arguments:["search_form"],access_arguments:["search content"]};return a}catch(b){console.log("search_menu - "+b)}}
function search_block_form(a,b){try{return a.elements.type={type:"hidden",default_value:"node"},a.elements.keys={type:"search",title:"",title_placeholder:!0,required:!0,default_value:""},a.options.attributes.onsubmit="_drupalgap_form_submit('"+a.id+"'); return false;",a}catch(c){console.log("search_block_form - "+c)}}function search_block_form_submit(a,b){try{drupalgap_goto("search/"+b.values.type+"/"+b.values.keys)}catch(c){console.log("search_block_form_submit - "+c)}}
function search_form(a,b){try{var c=arg(1),d=arg(2);a.elements.type={type:"hidden",default_value:c?c:"node"};a.elements.keys={type:"textfield",title:t("Enter your keywords"),required:!0,default_value:d?d:""};a.elements.submit={type:"submit",value:t("Go"),options:{attributes:{"data-icon":"search"}}};a.suffix+=theme("jqm_item_list",{title:t("Search results"),items:[],options:{attributes:{id:"search_form_results"}}});return a}catch(e){console.log("search_form - "+e)}}
function search_form_submit(a,b){try{var c=b.values.type,d=b.values.keys;switch(c){case "node":search_node(d,{success:function(a){var b=[],c;for(c in a)if(a.hasOwnProperty(c)){var d=theme("search_result_node",a[c]);b.push(d)}drupalgap_item_list_populate("#search_form_results",b)}});break;default:console.log("search_form_submit - unsupported type ("+c+")")}}catch(e){console.log("search_form_submit - "+e)}}
function search_form_pageshow(a){try{var b=arg(1),c=arg(2);switch(b){case "node":search_node(c,{success:function(a){var b=[],c;for(c in a)if(a.hasOwnProperty(c)){var d=theme("search_result_node",a[c]);b.push(d)}drupalgap_item_list_populate("#search_form_results",b)}});break;default:console.log("search_form_pageshow - unsupported type ("+b+")")}}catch(d){console.log("search_form_pageshow - "+d)}}
function search_node(a,b){try{b.method="GET",b.path="search_node/retrieve.json&keys="+encodeURIComponent(a),b.service="search_node",b.resource="retrieve",Drupal.services.call(b)}catch(c){console.log("search_node - "+c)}}function theme_search_result_node(a){try{return l("<h2>"+a.title+"</h2><p>"+a.snippet+"</p>","node/"+a.node.nid)}catch(b){console.log("theme_search_result_node - "+b)}}
function drupalgap_services_get_entity_resource(a){try{return console.log("WARNING: drupalgap_services_get_entity_resource() is deprecated! Use services_get_resource_function_for_entity() instead."),drupalgap.services[a]?drupalgap.services[a]:null}catch(b){console.log("drupalgap_services_get_entity_resource - "+b)}}
function services_get_resource_function_for_entity(a,b){var c=a+"_";switch(b){case "create":c+="save";break;case "retrieve":c+="load";break;case "update":c+="save";break;case "delete":c+="delete";break;default:c+="load"}return c}
function drupalgap_service_resource_extract_results(a){try{if("system"==a.service&&"connect"==a.resource){a.data.user.permissions=[];var b=a.data.user_permissions,c;for(c in b)a.data.user.permissions.push(b[c]);var d=a.data.content_types_list,e;for(e in d)if(d.hasOwnProperty(e)){var f=d[e];drupalgap.content_types_list[f.type]=f}a.data.user.content_types_user_permissions=a.data.content_types_user_permissions;drupalgap.site_settings=a.data.site_settings;"undefined"!==typeof a.data.date_formats&&(drupalgap.date_formats=
a.data.date_formats);"undefined"!==typeof a.data.date_types&&(drupalgap.date_types=a.data.date_types)}}catch(g){console.log("drupalgap_service_resource_extract_results - "+g)}}
function drupalgap_services_rss_extract_items(a){try{var b=null,c=$(a);c&&(b=[],c.find("item").each(function(){var a=$(this),a={title:a.find("title").text(),link:a.find("link").text(),description:a.find("description").text(),pubDate:a.find("pubDate").text(),author:a.find("author").text()};b.push(a)}));return b}catch(d){console.log("drupalgap_services_rss_extract_items - "+d)}}var _system_reload_page=null,_system_reload_messages=null;
function system_block_info(){var a={main:{delta:"main",module:"system"},messages:{delta:"messages",module:"system"},logo:{delta:"logo",module:"system"},logout:{delta:"logout",module:"system"},title:{delta:"title",module:"system"},powered_by:{delta:"powered_by",module:"system"},help:{delta:"help",module:"system"}},b=menu_list_system_menus(),c;for(c in b)if(b.hasOwnProperty(c)){var d=b[c].menu_name;a[d]={name:d,delta:d,module:"menu"}}return a}
function system_block_view(a){try{switch(a){case "main":return drupalgap_render_page();case "messages":a="";if(0==drupalgap.messages.length)return a;for(var b in drupalgap.messages)if(drupalgap.messages.hasOwnProperty(b)){var c=drupalgap.messages[b];a+='<div class="messages '+c.type+'">'+c.message+"</div>"}drupalgap.messages=[];return a;case "logo":return drupalgap.settings.logo?'<div class="logo">'+l(theme("image",{path:drupalgap.settings.logo}),"")+"</div>":"";case "logout":return Drupal.user.uid?
theme("logout"):"";case "title":return'<h1 id="'+system_title_block_id(drupalgap_path_get())+'"></h1>';case "powered_by":return'<p style="text-align: center;">'+t("Powered by")+": "+l("DrupalGap","http://www.drupalgap.org",{InAppBrowser:!0})+"</p>";case "help":return l("Help","http://www.drupalgap.org/support");default:return""}}catch(d){console.log("system_block_info - "+d)}}
function system_menu(){var a={dashboard:{title:t("Dashboard"),page_callback:"system_dashboard_page"},error:{title:t("Error"),page_callback:"system_error_page"},offline:{title:t("Offline"),page_callback:"system_offline_page"},401:{title:"401 - "+t("Not Authorized"),page_callback:"system_401_page"},404:{title:"404 - "+t("Not Found"),page_callback:"system_404_page"}};a._reload={title:t("Reloading")+"...",page_callback:"system_reload_page",pageshow:"system_reload_pageshow"};return a}
function system_401_page(a){return t("Sorry, you are not authorized to view this page.")}function system_404_page(a){return t("Sorry, the page you requested was not found.")}function system_reload_page(){try{var a=drupalgap_get_messages();empty(a)||(_system_reload_messages=a.slice(),drupalgap_set_messages([]));return""}catch(b){console.log("system_reload_page - "+b)}}
function system_reload_pageshow(){try{if(_system_reload_messages&&!empty(_system_reload_messages)){for(var a=0;a<_system_reload_messages.length;a++)drupalgap_set_message(_system_reload_messages[a].message,_system_reload_messages[a].type);_system_reload_messages=null}drupalgap_loading_message_show()}catch(b){console.log("system_reload_pageshow - "+b)}}
function system_drupalgap_goto_post_process(a){try{"_reload"==a&&_system_reload_page&&(a=""+_system_reload_page,_system_reload_page=null,drupalgap_loading_message_show(),drupalgap_goto(a,{reloadPage:!0}))}catch(b){console.log("system_drupalgap_goto_post_process - "+b)}}
function system_dashboard_page(){try{var a={};a.site_info={markup:'<h4 style="text-align: center;">'+Drupal.settings.site_path+"</h4>"};a.welcome={markup:'<h2 style="text-align: center;">'+t("Welcome to DrupalGap")+'</h2><p style="text-align: center;">'+t("The open source application development kit for Drupal!")+"</p>"};drupalgap.settings.logo&&(a.logo={markup:"<center>"+theme("image",{path:drupalgap.settings.logo})+"</center>"});a.get_started={theme:"button_link",text:t("Getting Started Guide"),
path:"http://www.drupalgap.org/get-started",options:{InAppBrowser:!0}};a.support={theme:"button_link",text:t("Support"),path:"http://www.drupalgap.org/support",options:{InAppBrowser:!0}};return a}catch(b){console.log("system_dashboard_page - "+b)}}function system_error_page(){return{info:{markup:"<p>"+t("An unexpected error has occurred!")+"</p>"}}}
function system_offline_page(){try{return{message:{markup:"<h2>"+t("Failed Connection")+"</h2><p>"+t("Oops! We couldn't connect to")+":</p><p>"+Drupal.settings.site_path+"</p>"},try_again:{theme:"button",text:t("Try Again"),attributes:{onclick:"javascript:offline_try_again();"}},footer:{markup:"<p>"+t("Check your device's network settings and try again.")+"</p>"}}}catch(a){console.log("system_offline_page - "+a)}}
function offline_try_again(){try{var a=drupalgap_check_connection();if(drupalgap.online)system_connect({success:function(){drupalgap_goto("")}});else{var b=t("Sorry, no connection found!")+" ("+a+")";drupalgap_alert(b,{title:"Offline"});return!1}}catch(c){console.log("offline_try_again - "+c)}}function system_regions_list(){return["header","content","footer"]}
function system_settings_form(a,b){try{return a.elements.submit||(a.elements.submit={type:"submit",value:t("Save configuration")}),a.buttons.cancel||(a.buttons.cancel=drupalgap_form_cancel_button()),a.submit.push("system_settings_form_submit"),a}catch(c){console.log("system_settings_form - "+c)}}function system_settings_form_submit(a,b){try{if(b.values)for(var c in b.values)b.values.hasOwnProperty(c)&&variable_set(c,b.values[c])}catch(d){console.log("system_settings_form_submit - "+d)}}
function system_title_block_id(a){try{return"drupalgap_page_title_"+drupalgap_get_page_id(a)}catch(b){console.log("system_title_block_id - "+b)}}function system_logout_block_access_callback(a){try{var b=arg(null,a.path);return b&&2==b.length&&"user"==b[0]&&b[1]==Drupal.user.uid?!0:!1}catch(c){console.log("system_logout_block_access_callback - "+c)}}
function user_access(a,b){try{var c;c=b?b:Drupal.user;if(1==c.uid)return!0;var d=!1,e;for(e in c.permissions)if(c.permissions.hasOwnProperty(e)&&c.permissions[e].permission==a){d=!0;break}return d}catch(f){console.log("user_access - "+f)}}function user_edit_access(a){try{return Drupal.user.uid==a.uid||user_access("administer users")?!0:!1}catch(b){console.log("user_edit_access - "+b)}}
function user_listing(){return{user_listing:{theme:"jqm_item_list",title:t("Users"),items:[],attributes:{id:"user_listing_items"}}}}function user_listing_pageshow(){try{views_datasource_get_view_result("drupalgap/views_datasource/drupalgap_users",{success:function(a){var c=[],d;for(d in a.users)if(a.users.hasOwnProperty(d)){var e=a.users[d];c.push(l(e.user.name,"user/"+e.user.uid))}drupalgap_item_list_populate("#user_listing_items",c)}})}catch(a){console.log("user_listing_pageshow - "+a)}}
function user_logout_callback(){return"<p>"+t("Logging out")+"...</p>"}function user_logout_pagechange(){try{user_logout({success:function(a){drupalgap_goto(drupalgap.settings.front)}})}catch(a){console.log("user_logout_pagechange - "+a)}}
function user_menu(){var a={user:{page_callback:"user_page"},"user/login":{title:t("Login"),page_callback:"drupalgap_get_form",page_arguments:["user_login_form"],options:{reloadPage:!0}},"user/logout":{title:t("Logout"),page_callback:"user_logout_callback",pagechange:"user_logout_pagechange",options:{reloadPage:!0}},"user/register":{title:t("Register"),page_callback:"drupalgap_get_form",page_arguments:["user_register_form"],access_callback:"user_register_access",options:{reloadPage:!0}},"user/%":{title:t("My account"),
title_callback:"user_view_title",title_arguments:[1],page_callback:"user_view",pageshow:"user_view_pageshow",page_arguments:[1]},"user/%/view":{title:t("View"),type:"MENU_DEFAULT_LOCAL_TASK",weight:-10},"user/%/edit":{title:t("Edit"),page_callback:"entity_page_edit",pageshow:"entity_page_edit_pageshow",page_arguments:["user_profile_form","user",1],access_callback:"user_edit_access",access_arguments:[1],weight:0,type:"MENU_LOCAL_TASK",options:{reloadPage:!0}},"user-listing":{title:t("Users"),page_callback:"user_listing",
access_arguments:["access user profiles"],pageshow:"user_listing_pageshow"}};a["user/password"]={title:t("Request new password"),page_callback:"drupalgap_get_form",page_arguments:["user_pass_form"]};return a}function user_page(){return"user_page()"}function user_register_access(){try{switch(drupalgap.site_settings.user_register){case "0":return!1;case "1":case "2":return!0}}catch(a){console.log("user_register_access - "+a)}}
function user_services_postprocess(a,b){try{if("user"==a.service&&in_array(a.resource,["login","logout","register"])&&b.responseText){var c=JSON.parse(b.responseText);if($.isArray(c)){var d="",e;for(e in c)c.hasOwnProperty(e)&&(d+=c[e]+"\n");""!=d&&drupalgap_alert(d)}}}catch(f){console.log("user_services_postprocess - "+f)}}function user_theme(){return{user_picture:{template:"user-picture"},user_profile:{template:"user-profile"}}}
function user_view(a){try{if(a)return{container:_drupalgap_entity_page_container("user",a,"view")};console.log("user_view - No user id provided!")}catch(b){console.log("user_view - "+b)}}
function user_view_pageshow(a){try{user_load(a,{success:function(a,b,e){var f="full",g=null;b&&(f=b);e&&(g=e);g||(g=language_default());a&&(b={theme:"user_profile",account:a,view_mode:f,language:g,name:{markup:a.name},created:{markup:'<div class="user_profile_history"><h3>'+t("History")+"</h3><dl><dt>"+t("Member since")+"</td></dt><dd>"+(new Date(1E3*parseInt(a.created))).toDateString()+"</dd></div>"}},"undefined"!==typeof a.content&&(b.content={markup:a.content}),a.picture&&a.picture.fid&&(b.picture=
{theme:"image",path:image_style_url(drupalgap.site_settings.user_picture_style,a.picture.uri)}),_drupalgap_entity_page_container_inject("user",a.uid,"view",b))}})}catch(b){console.log("user_view_pageshow - "+b)}}function user_view_title(a,b){try{user_load(b,{success:function(b){a.call(null,b.name)}})}catch(c){console.log("user_view_title - "+c)}}
function drupalgap_user_has_role(a,b){try{var c=!1,d=null,d=b?b:Drupal.user,e;for(e in d.roles)if(d.roles.hasOwnProperty(e)&&a==d.roles[e]){c=!0;break}return c}catch(f){console.log("drupalgap_user_has_role - "+f)}}
function user_login_form(a,b){try{return a.entity_type="user",a.bundle=null,a.elements.name={type:"textfield",title:t("Username"),title_placeholder:!0,required:!0},a.elements.pass={type:"password",title:t("Password"),title_placeholder:!0,required:!0,attributes:{onkeypress:"drupalgap_form_onkeypress('"+a.id+"')"}},a.elements.submit={type:"submit",value:t("Login")},user_register_access()&&(a.buttons.create_new_account={title:t("Create new account"),attributes:{onclick:"drupalgap_goto('user/register')"}}),
a.buttons.forgot_password={title:t("Request new password"),attributes:{onclick:"drupalgap_goto('user/password')"}},a}catch(c){console.log("user_login_form - "+c)}}function user_login_form_submit(a,b){try{user_login(b.values.name,b.values.pass,{success:function(a){drupalgap_goto(drupalgap.settings.front)}})}catch(c){console.log("user_login_form_submit - "+c)}}
function user_register_form(a,b){try{return a.entity_type="user",a.bundle=null,a.elements.name={type:"textfield",title:t("Username"),title_placeholder:!0,required:!0,description:t("Spaces are allowed; punctuation is not allowed except for periods, hyphens, apostrophes, and underscores.")},a.elements.mail={type:"email",title:t("E-mail address"),title_placeholder:!0,required:!0},drupalgap.site_settings.user_email_verification||(a.elements.conf_mail={type:"email",title:t("Confirm e-mail address"),title_placeholder:!0,
required:!0},a.elements.pass={type:"password",title:t("Password"),title_placeholder:!0,required:!0},a.elements.pass2={type:"password",title:t("Confirm password"),title_placeholder:!0,required:!0}),drupalgap_field_info_instances_add_to_form("user",null,a,null),a.user_register={user_mail_register_no_approval_required_body:t("Registration complete!"),user_mail_register_pending_approval_required_body:t("Registration complete, waiting for administrator approval."),user_mail_register_email_verification_body:t("Registration complete, check your e-mail inbox to verify the account.")},
a.auto_user_login=!0,a.elements.submit={type:"submit",value:t("Create new account")},a}catch(c){console.log("user_register_form - "+c)}}
function user_register_form_validate(a,b){try{drupalgap.site_settings.user_email_verification||b.values.pass==b.values.pass2||drupalgap_form_set_error("pass",t("Passwords do not match!")),empty(b.values.mail)||empty(b.values.conf_mail)||b.values.mail==b.values.conf_mail||drupalgap_form_set_error("mail",t("E-mail addresses do not match!"))}catch(c){console.log("user_register_form_validate - "+c)}}
function user_register_form_submit(a,b){try{var c=drupalgap_entity_build_from_form_state(a,b);user_register(c,{success:function(b){b=a.user_register;var d={title:t("Registered")};drupalgap.site_settings.user_email_verification?(drupalgap_alert(b.user_mail_register_email_verification_body,d),drupalgap_goto("")):"2"==drupalgap.site_settings.user_register?(drupalgap_alert(b.user_mail_register_pending_approval_required_body,d),drupalgap_goto("")):(drupalgap_alert(b.user_mail_register_no_approval_required_body,
d),a.auto_user_login?user_login(c.name,c.pass,{success:function(a){drupalgap_goto("")}}):drupalgap_goto(""))},error:function(c,d,g){(c=_drupalgap_form_submit_response_errors(a,b,c,d,g))&&drupalgap_alert(c)}})}catch(d){console.log("user_register_form_submit - "+d)}}
function user_profile_form(a,b,c){try{return a.entity_type="user",a.bundle=null,drupalgap_entity_add_core_fields_to_form("user",null,a,c),drupalgap_field_info_instances_add_to_form("user",null,a,c),user_access("change own username")||(a.elements.name.access=!1,a.elements.name.required=!1),0==drupalgap.site_settings.user_pictures&&delete a.elements.picture,Drupal.user.uid==c.uid&&(a.elements.current_pass={title:t("Current password"),type:"password",description:t("Enter your current password to change the E-mail address or Password.")}),
a.elements.pass_pass1={title:t("Password"),type:"password"},a.elements.pass_pass2={title:t("Confirm password"),type:"password",description:t("To change the current user password, enter the new password in both fields.")},a.elements.submit={type:"submit",value:t("Save")},a.buttons.cancel={title:t("Cancel"),attributes:{onclick:"javascript:drupalgap_back();"}},a}catch(d){console.log("user_profile_form - "+d)}}
function user_profile_form_validate(a,b){try{empty(b.values.current_pass)?!empty(b.values.current_pass)||empty(b.values.pass_pass1)||empty(b.values.pass_pass2)||drupalgap_form_set_error("current_pass",t("You must enter your current password to change your password.")):empty(b.values.pass_pass1)||empty(b.values.pass_pass2)||b.values.pass_pass1==b.values.pass_pass2||drupalgap_form_set_error("pass_pass1",t("Passwords do not match."))}catch(c){console.log("user_profile_form_validate - "+c)}}
function user_profile_form_submit(a,b){try{var c=drupalgap_entity_build_from_form_state(a,b);!c.current_pass||empty(c.pass_pass1)||empty(c.pass_pass2)||(c.pass=c.pass_pass1,delete c.pass_pass1,delete c.pass_pass2);drupalgap_entity_form_submit(a,b,c)}catch(d){console.log("user_profile_form_submit - "+d)}}
function user_pass_form(a,b){try{return a.elements.name={type:"textfield",title:t("Username or e-mail address"),required:!0,attributes:{onkeypress:"drupalgap_form_onkeypress('"+a.id+"')"}},a.elements.submit={type:"submit",value:t("E-mail new password")},a}catch(c){console.log("user_pass_form - "+c)}}
function user_pass_form_submit(a,b){try{user_request_new_password(b.values.name,{success:function(a){a[0]?(a=t("Further instructions have been sent to your e-mail address."),drupalgap_set_message(a)):(a=t("There was a problem sending an e-mail to your address."),drupalgap_set_message(a,"warning"));drupalgap_goto("user/login")}})}catch(c){console.log("user_pass_form_submit - "+c)}}var _taxonomy_term_reference_terms={};
function drupalgap_taxonomy_vocabularies_extract(a){try{var b=!1;if(a&&0<a.length){var b={},c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];b[d.machine_name]=d}}return b}catch(e){console.log("drupalgap_taxonomy_vocabularies_extract - "+e)}}
function taxonomy_field_formatter_view(a,b,c,d,e,f,g){try{a={};"string"===typeof f&&(f={0:{tid:f}});"undefined"!==typeof f[language_default()]&&(f=f[language_default()]);if(!empty(f))for(var h in f)if(f.hasOwnProperty(h)){var k=f[h],m=k.tid;k.name&&(m=k.name);b=null;switch(g.type){case "taxonomy_term_reference_link":b={theme:"button_link",text:m,path:"taxonomy/term/"+k.tid};break;case "taxonomy_term_reference_plain":b={markup:m};break;default:b={markup:m}}a[h]=b}return a}catch(n){console.log("taxonomy_field_formatter_view - "+
n)}}
function taxonomy_field_widget_form(a,b,c,d,e,f,g,h){try{f[g].type="hidden";var k=f[g].id+"-list";f[g].children.push({theme:"item_list",items:[],attributes:{id:k,"data-role":"listview","data-filter":"true","data-inset":"true","data-filter-placeholder":"..."}});var m=taxonomy_vocabulary_machine_name_load(c.settings.allowed_values[0].vocabulary).vid;f[g].children.push({markup:'<script type="text/javascript">$("#'+k+'").on("filterablebeforefilter",function(e, d) {_taxonomy_field_widget_form_autocomplete("'+f[g].id+
'", '+m+", this, e, d);});\x3c/script>"})}catch(n){console.log("taxonomy_field_widget_form - "+n)}}var _taxonomy_field_widget_form_autocomplete_input=null;
function _taxonomy_field_widget_form_autocomplete(a,b,c,d,e){try{var f=$(c),g=$(e.input),h=g.val(),k="";_taxonomy_field_widget_form_autocomplete_input=g;$(_taxonomy_field_widget_form_autocomplete_input).on("change",function(){$("#"+a).val($(this).val())});f.html("");h&&0<h.length&&(f.html('<li><div class="ui-loader"><span class="ui-icon ui-icon-loading"></span></div></li>'),f.listview("refresh"),taxonomy_term_index({fields:["tid","name"],parameters:{vid:b,name:"%"+h+"%"},parameters_op:{name:"like"}},
{success:function(c){if(0!=c.length){for(var d in c)if(c.hasOwnProperty(d)){var e=c[d],g={tid:e.tid,vid:b,name:e.name,onclick:"_taxonomy_field_widget_form_click('"+a+"', '"+f.attr("id")+"', this)"};k+="<li "+drupalgap_attributes(g)+">"+e.name+"</li>"}f.html(k);f.listview("refresh");f.trigger("updatelayout")}}}))}catch(m){console.log("_taxonomy_field_widget_form_autocomplete - "+m)}}
function _taxonomy_field_widget_form_click(a,b,c){try{var d=$(c).attr("name");$("#"+a).val(d);$(_taxonomy_field_widget_form_autocomplete_input).val($(c).attr("name"));$("#"+b).html("")}catch(e){console.log("_taxonomy_field_widget_form_click - "+e)}}
function taxonomy_assemble_form_state_into_field(a,b,c,d,e,f,g,h){try{a=null;switch(e.widget.type){case "taxonomy_autocomplete":h.use_wrapper=!1;a=c;break;case "options_select":a=c}return a}catch(k){console.log("taxonomy_assemble_form_state_into_field - "+k)}}
function taxonomy_menu(){return{"taxonomy/vocabularies":{title:t("Taxonomy"),page_callback:"taxonomy_vocabularies_page",pageshow:"taxonomy_vocabularies_pageshow"},"taxonomy/vocabulary/%":{title:t("Taxonomy vocabulary"),page_callback:"taxonomy_vocabulary_page",page_arguments:[2],pageshow:"taxonomy_vocabulary_pageshow"},"taxonomy/vocabulary/%/view":{title:t("View"),type:"MENU_DEFAULT_LOCAL_TASK",weight:-10},"taxonomy/vocabulary/%/edit":{title:t("Edit"),page_callback:"entity_page_edit",pageshow:"entity_page_edit_pageshow",
page_arguments:["taxonomy_form_vocabulary","taxonomy_vocabulary",2],weight:0,type:"MENU_LOCAL_TASK",access_arguments:["administer taxonomy"],options:{reloadPage:!0}},"taxonomy/term/%":{title:t("Taxonomy term"),page_callback:"taxonomy_term_page",page_arguments:[2],pageshow:"taxonomy_term_pageshow"},"taxonomy/term/%/view":{title:t("View"),type:"MENU_DEFAULT_LOCAL_TASK",weight:-10},"taxonomy/term/%/edit":{title:t("Edit"),page_callback:"entity_page_edit",pageshow:"entity_page_edit_pageshow",page_arguments:["taxonomy_form_term",
"taxonomy_term",2],weight:0,type:"MENU_LOCAL_TASK",access_arguments:["administer taxonomy"],options:{reloadPage:!0}}}}
function taxonomy_form_vocabulary(a,b,c){try{return a.entity_type="taxonomy_vocabulary",a.bundle=null,a.action="taxonomy/vocabularies",drupalgap_entity_add_core_fields_to_form("taxonomy_vocabulary",null,a,c),a.elements.submit={type:"submit",value:t("Save")},a.buttons.cancel=drupalgap_form_cancel_button(),c&&c.vid&&user_access("administer taxonomy")&&(a.buttons["delete"]=drupalgap_entity_edit_form_delete_button("taxonomy_vocabulary",c.vid)),a}catch(d){console.log("taxonomy_form_vocabulary - "+d)}}
function taxonomy_form_vocabulary_submit(a,b){try{var c=drupalgap_entity_build_from_form_state(a,b);drupalgap_entity_form_submit(a,b,c)}catch(d){console.log("taxonomy_form_vocabulary_submit - "+d)}}
function taxonomy_form_term(a,b,c){try{return a.entity_type="taxonomy_term",a.bundle=null,a.action="taxonomy/vocabularies",drupalgap_entity_add_core_fields_to_form("taxonomy_term",null,a,c),a.elements.submit={type:"submit",value:t("Save")},a.buttons.cancel=drupalgap_form_cancel_button(),c&&c.tid&&user_access("administer taxonomy")&&(a.buttons["delete"]=drupalgap_entity_edit_form_delete_button("taxonomy_term",c.tid)),a}catch(d){console.log("taxonomy_form_term - "+d)}}
function taxonomy_form_term_submit(a,b){try{var c=drupalgap_entity_build_from_form_state(a,b);drupalgap_entity_form_submit(a,b,c)}catch(d){console.log("taxonomy_form_term_submit - "+d)}}
function taxonomy_term_page(a){try{if(a)return{container:_drupalgap_entity_page_container("taxonomy_term",a,"view"),taxonomy_term_node_listing:{theme:"jqm_item_list",items:[],attributes:{id:"taxonomy_term_node_listing_items_"+a}}};console.log("taxonomy_term_pageshow - No term id provided!")}catch(b){console.log("taxonomy_term_pageshow - "+b)}}
function taxonomy_term_pageshow(a){try{taxonomy_term_load(a,{success:function(a){_drupalgap_entity_page_container_inject("taxonomy_term",a.tid,"view",{name:{markup:"<h2>"+a.name+"</h2>"},description:{markup:"<p>"+(a.description?a.description:"")+"</p>"}});taxonomy_term_selectNodes(a.tid,{success:function(b){var e=[],f;for(f in b)if(b.hasOwnProperty(f)){var g=b[f];e.push(l(g.title,"node/"+g.nid))}drupalgap_item_list_populate("#taxonomy_term_node_listing_items_"+a.tid,e)}})}})}catch(b){console.log("taxonomy_term_pageshow - "+
b)}}function taxonomy_term_selectNodes(a,b){try{b.method="POST",b.path="taxonomy_term/selectNodes.json",b.service="taxonomy_term",b.resource="selectNodes",b.data=JSON.stringify({tid:a}),Drupal.services.call(b)}catch(c){console.log("taxonomy_term_selectNodes - "+c)}}function taxonomy_vocabularies_page(){return{vocabulary_listing:{theme:"jqm_item_list",title:t("Vocabularies"),items:[],attributes:{id:"vocabulary_listing_items"}}}}
function taxonomy_vocabularies_pageshow(){try{taxonomy_vocabulary_index(null,{success:function(a){var c=[],d;for(d in a)if(a.hasOwnProperty(d)){var e=a[d];c.push(l(e.name,"taxonomy/vocabulary/"+e.vid))}drupalgap_item_list_populate("#vocabulary_listing_items",c)}})}catch(a){console.log("taxonomy_vocabularies_pageshow - "+a)}}
function taxonomy_vocabulary_page(a){try{if(a)return{container:_drupalgap_entity_page_container("taxonomy_vocabulary",a,"view"),taxonomy_term_listing:{theme:"jqm_item_list",title:t("Terms"),items:[],attributes:{id:"taxonomy_term_listing_items_"+a}}};console.log("taxonomy_vocabulary_page - No vocabulary id provided!")}catch(b){console.log("taxonomy_vocabulary_page - "+b)}}
function taxonomy_vocabulary_pageshow(a){try{taxonomy_vocabulary_load(a,{success:function(b){_drupalgap_entity_page_container_inject("taxonomy_vocabulary",b.vid,"view",{name:{markup:"<h2>"+b.name+"</h2>"},description:{markup:"<p>"+b.description+"</p>"}});taxonomy_term_index({parameters:{vid:a}},{success:function(b){if(0!=b.length){var c=[],f;for(f in b)if(b.hasOwnProperty(f)){var g=b[f];c.push(l(g.name,"taxonomy/term/"+g.tid))}drupalgap_item_list_populate("#taxonomy_term_listing_items_"+a,c)}}})}})}catch(b){console.log("taxonomy_vocabulary_pageshow - "+
b)}}function taxonomy_vocabulary_get_vid_from_name(a){try{var b=taxonomy_vocabulary_machine_name_load(a);return b?b.vid:!1}catch(c){console.log("taxonomy_vocabulary_get_vid_from_name - "+c)}}function taxonomy_vocabulary_machine_name_load(a){try{return drupalgap.taxonomy_vocabularies&&drupalgap.taxonomy_vocabularies[a]?drupalgap.taxonomy_vocabularies[a]:!1}catch(b){console.log("taxonomy_vocabulary_machine_name_load - "+b)}}
function theme_taxonomy_term_reference(a){try{var b="",c=!0;"undefined"!==typeof a.render_input_element&&(c=a.render_input_element);c&&(a.attributes.type="hidden",b+="<input "+drupalgap_attributes(a.attributes)+"/>");c=!1;"undefined"!==typeof a.required&&(c=a.required);var d=!1;"undefined"!==typeof a.exposed&&(d=a.exposed);var e=taxonomy_vocabulary_machine_name_load(a.field_info_field.settings.allowed_values[0].vocabulary),f=a.field_info_instance.widget.type;"options_select"==f&&(f="select");var g=
"theme_"+f,h=a.attributes.id+"-"+f;if(drupalgap_function_exists(g)){var k=window[g],m={attributes:{id:h,onchange:"_theme_taxonomy_term_reference_onchange(this, '"+a.attributes.id+"');"}},f=!1;_taxonomy_term_reference_terms[a.attributes.id]&&(f=!0,m.options=_taxonomy_term_reference_terms[a.attributes.id]);"undefined"!==typeof a.value?m.value=a.value:c||(m.value=d?"All":"");b+=k.call(null,m);if(!f)var n={page_id:drupalgap_get_page_id(drupalgap_path_get()),jqm_page_event:"pageshow",jqm_page_event_callback:"_theme_taxonomy_term_reference_load_items",
jqm_page_event_args:JSON.stringify({taxonomy_vocabulary:e,element_id:a.attributes.id,widget_id:h,required:c,exposed:d})},b=b+drupalgap_jqm_page_event_script_code(n)}else console.log("WARNING: theme_taxonomy_term_reference() - unsupported widget type! ("+f+")");return b}catch(q){console.log("theme_taxonomy_term_reference - "+q)}}
function _theme_taxonomy_term_reference_load_items(a){try{taxonomy_term_index({parameters:{vid:a.taxonomy_vocabulary.vid}},{success:function(b){if(0!=b.length){_taxonomy_term_reference_terms[a.element_id]={};var d=$("#"+a.widget_id);if(!a.required){var e=null;a.exposed?(e='<option value="All">- '+t("Any")+" -</option>",_taxonomy_term_reference_terms[a.element_id].All="- Any -"):(e='<option value="">- '+t("None")+" -</option>",_taxonomy_term_reference_terms[a.element_id][""]="- None -");$(d).append(e)}for(var f in b)if(b.hasOwnProperty(f)){var g=
b[f],e='<option value="'+g.tid+'">'+g.name+"</option>";$(d).append(e);_taxonomy_term_reference_terms[a.element_id][g.tid]=g.name}$(d).selectmenu("refresh",!0)}}})}catch(b){console.log("_theme_taxonomy_term_reference_load_items - "+b)}}function _theme_taxonomy_term_reference_onchange(a,b){try{$("#"+b).val($(a).val())}catch(c){console.log("_theme_taxonomy_term_reference_onchange - "+c)}}
function taxonomy_views_exposed_filter(a,b,c,d,e){try{c.type="hidden";for(var f in e.settings.allowed_values)if(e.settings.allowed_values.hasOwnProperty(f)){var g={required:c.required,render_input_element:!1,attributes:{id:c.options.attributes.id},field_info_field:e,field_info_instance:{widget:{type:"options_select"}},exposed:!0};empty(d.value)||(g.value=parseInt(d.value[0]),g.attributes.value=g.value);a="";empty(c.title)||(a+=theme("form_element_label",{element:c}));a+=theme("taxonomy_term_reference",
g);c.children.push({markup:a})}}catch(h){console.log("taxonomy_views_exposed_filter - "+h)}}var _views_exposed_filter_query=null,_views_exposed_filter_reset=!1,_views_exposed_filter_submit_variables=null,_views_embed_view_selector=null,_views_embed_view_results=null,_views_embed_view_options=null;
function views_datasource_get_view_result(a,b){try{-1!=a.indexOf("?")&&(a=a.replace("?","&"));if(b.reset)window.localStorage.removeItem(a);else if(Drupal.settings.cache.views.enabled){var c=window.localStorage.getItem(a);if(c)if(c=JSON.parse(c),"undefined"!==typeof c.expiration&&0!=c.expiration&&time()>c.expiration)window.localStorage.removeItem(a);else if(b.success){b.success(c);return}}Drupal.services.call({endpoint:"",service:"views_datasource",resource:"",method:"GET",path:a,success:function(c){try{if(b.success){c.path=
a;if(Drupal.settings.cache.views.enabled){var d=time()+Drupal.settings.cache.views.expiration;0==Drupal.settings.cache.views.expiration&&(d=0);c.expiration=d;window.localStorage.setItem(a,JSON.stringify(c))}b.success(c)}}catch(g){console.log("views_datasource_get_view_result - success - "+g)}},error:function(a,c,d){try{b.error&&b.error(a,c,d)}catch(h){console.log("views_datasource_get_view_result - error - "+h)}}})}catch(d){console.log("views_datasource_get_view_result - "+d)}}
function views_exposed_form(a,b,c){try{a.variables=c.variables;for(var d in c.filter)if(c.filter.hasOwnProperty(d)){var e=c.filter[d],f=null,g=null,f=e.options.expose.identifier,g={id:f,type:e.options.group_info.widget,title:e.options.expose.label,required:e.options.expose.required,options:{attributes:{id:drupalgap_form_get_element_id(f,a.id)}},views_field:d,filter:e,children:[]},h=e.definition.field_name;if(h){var k=drupalgap_field_info_field(h),m=k.module+"_views_exposed_filter";if(!drupalgap_function_exists(m)){dpm("WARNING: views_exposed_form() - "+
m+"() must be created to assemble the "+k.type+" filter used by "+h);continue}window[m](a,b,g,e,k)}else if("select"==g.type)list_views_exposed_filter(a,b,g,e,null);else{dpm('WARNING: views_exposed_form() - I do not know how to handle the exposed filter for the "'+d+'" field');console.log(e);continue}f&&(a.elements[f]=g)}a.elements.submit={type:"submit",value:c.exposed_data.submit};c.exposed_data.reset&&_views_exposed_filter_reset&&(a.buttons.reset={title:c.exposed_data.reset,attributes:{id:a.id+"-reset",
onclick:"views_exposed_form_reset()"}});return a}catch(n){console.log("views_exposed_form - "+n)}}
function views_exposed_form_submit(a,b){try{var c="",d;for(d in b.values)if(b.values.hasOwnProperty(d)){var e=b.values[d];empty(e)||(c+=d+"="+encodeURIComponent(e)+"&")}empty(c)||(c=c.substr(0,c.length-1));if(_views_exposed_filter_query){if(_views_exposed_filter_query==c)return;-1!=a.variables.path.indexOf("&"+_views_exposed_filter_query)&&(a.variables.path=a.variables.path.replace("&"+_views_exposed_filter_query,""))}_views_exposed_filter_query=c;_views_exposed_filter_reset=!0;a.variables.path+=
"&"+c;a.variables.page=0;_views_exposed_filter_submit_variables=a.variables;_theme_view(a.variables)}catch(f){console.log("views_exposed_form_submit - "+f)}}
function views_exposed_form_reset(){try{_views_exposed_filter_submit_variables.path=_views_exposed_filter_submit_variables.path.replace("&"+_views_exposed_filter_query,""),_views_exposed_filter_submit_variables.page=0,_views_exposed_filter_reset=!1,_views_exposed_filter_query=null,_theme_view(_views_exposed_filter_submit_variables)}catch(a){console.log("views_exposed_form_reset - "+a)}}
function theme_view(a){try{a.attributes.id||(console.log("WARNING: theme_view() - No id specified on attributes! A random id will be generated instead."),a.attributes.id="views-view--"+user_password());in_array(a.attributes.id,drupalgap.views.ids)?$("#"+a.attributes.id)?dpm("WARNING: theme_view() - this id already exists in the DOM: #"+a.attributes.id+" - the view will be rendered into the first container that is located in the DOM - if you are re-using this same view, it is recommended to append a unique identifier (e.g. an entity id) to your views id, that way you can re-use the same view across multiple pages."):
drupalgap.views.ids.splice($.inArray(a.attributes.id,drupalgap.views.ids),1):drupalgap.views.ids.push(a.attributes.id);a.attributes["class"]+="view ";var b="<div "+drupalgap_attributes(a.attributes)+" ></div>",c={page_id:drupalgap_get_page_id(),jqm_page_event:"pageshow",jqm_page_event_callback:"_theme_view",jqm_page_event_args:JSON.stringify(a)};return b+drupalgap_jqm_page_event_script_code(c)}catch(d){console.log("theme_view - "+d)}}
function _theme_view(a){try{var b=0;a.page&&(b=a.page);var c=$.extend({},{success:function(b){try{$("#"+a.attributes.id).html(b)}catch(c){console.log("_theme_view - success - "+c)}}},a);views_embed_view(a.path+"&page="+b,c)}catch(d){console.log("_theme_view - "+d)}}
function views_embed_view(a,b){try{views_datasource_get_view_result(a,{success:function(a){try{if(_views_embed_view_results=a,_views_embed_view_options=b,b.success){b.results=a;var c=theme("views_view",b);b.success(c)}}catch(f){console.log("views_embed_view - success - "+f)}},error:function(a,c,f){try{_views_embed_view_results=null,b.error&&b.error(a,c,f)}catch(g){console.log("views_embed_view - error - "+g)}}})}catch(c){console.log("views_embed_view - "+c)}}
function theme_views_view(a){try{var b="",c=_views_embed_view_results;if(!c)return b;a.format||(a.format="unformatted_list");var d=c.view.root,e=c.view.child;a.title&&(b+=theme("header",{text:a.title,attributes:a.title_attributes?a.title_attributes:null}),"unformatted"!=a.format&&(b+=theme("views_spacer",null)));var f="";"undefined"!==typeof c.view.exposed_data&&(f=drupalgap_get_form("views_exposed_form",{exposed_data:c.view.exposed_data,exposed_raw_input:c.view.exposed_raw_input,filter:c.view.filter,
variables:a}));var g="#"+drupalgap_get_page_id()+" #"+a.attributes.id;_views_embed_view_selector=g;if(0==c.view.count)return $(g).hide(),setTimeout(function(){$(g).trigger("create").show("fast")},100),a.empty_callback&&function_exists(a.empty_callback)?f+(0,window[a.empty_callback])(c.view):b+f;var b=b+f,h=drupalgap_views_get_result_formats(a),k=""+h.open+drupalgap_views_render_rows(a,_views_embed_view_results,d,e,h.open_row,h.close_row)+h.close,d="";c.view.pages&&(d=theme("pager",a));c="top";"undefined"!==
typeof a.pager_pos&&(c=a.pager_pos);module_exists("views_infinite_scroll")?b+=k:"top"==c?(b+=d,empty(d)||(b+=theme("views_spacer",null)),b+=k):"bottom"==c?(b+=k,empty(d)||(b+=theme("views_spacer",null)),b+=d):console.log("WARNING: theme_views_view - unsupported pager_pos ("+c+")");$(g).hide();setTimeout(function(){$(g).trigger("create").show("fast")},100);return b}catch(m){console.log("theme_views_view - "+m)}}function theme_views_spacer(a){return'<h2 class="dg_empty_list_header">&nbsp;</h2>'}
function theme_pager(a){try{var b="",c=a.results.view,d=c.page,e=c.pages,f=c.count,d=c.page;if(0==f)return b;c=[];0!=d&&c.push(theme("pager_previous",a));d!=e-1&&c.push(theme("pager_next",a));if(0<c.length)var g="theme_pager_"+user_password(),b=b+("<div "+drupalgap_attributes({id:g,"class":"pager","data-role":"navbar"})+">"+theme("item_list",{items:c})+'</div><script type="text/javascript">$("#'+g+'").navbar();\x3c/script>');return b}catch(h){console.log("theme_pager - "+h)}}
function theme_pager_link(a,b){try{b.attributes||(b.attributes={});b.attributes.href="#";var c=drupalgap_attributes(b.attributes);return"<a onclick='"+_theme_pager_link_onclick(a)+"' "+c+">"+b.text+"</a>"}catch(d){console.log("theme_pager_link - "+d)}}function _theme_pager_link_onclick(a){try{var b=$.extend({},{},a);b.results&&delete b.results;return"_theme_pager_link_click("+JSON.stringify(b)+")"}catch(c){console.log("_theme_pager_link_onclick - "+c)}}
function _theme_pager_link_click(a){try{_theme_view(a)}catch(b){console.log("_theme_pager_link_click - "+b)}}function theme_pager_next(a){try{return a.page=a.results.view.page+1,theme_pager_link(a,{text:"&raquo;",attributes:{"class":"pager_next"}})}catch(b){console.log("theme_pager_next - "+b)}}function theme_pager_previous(a){try{return a.page=a.results.view.page-1,theme_pager_link(a,{text:"&laquo;",attributes:{"class":"pager_previous"}})}catch(b){console.log("theme_pager_previous - "+b)}}
function drupalgap_views_get_result_formats(a){try{var b={};a.format||(a.format="unformatted_list");var c="",d="",e="",f="",g={};"undefined"!==typeof a.format_attributes&&(g=$.extend(!0,g,a.format_attributes));"undefined"===typeof g["class"]&&(g["class"]="");g["class"]+=" views-results ";switch(a.format){case "ul":"undefined"===typeof g["data-role"]&&(g["data-role"]="listview");c="<ul "+drupalgap_attributes(g)+">";d="</ul>";e="<li>";f="</li>";break;case "ol":"undefined"===typeof g["data-role"]&&(g["data-role"]=
"listview");c="<ol "+drupalgap_attributes(g)+">";d="</ol>";e="<li>";f="</li>";break;case "table":case "jqm_table":"jqm_table"==a.format&&("undefined"===typeof g["data-role"]&&(g["data-role"]="table"),"undefined"===typeof g["data-mode"]&&(g["data-mode"]="reflow"),console.log("WARNING: theme_views_view() - jqm_table not supported, yet"));c="<table "+drupalgap_attributes(g)+">";d="</table>";e="<tr>";f="</tr>";break;default:"undefined"===typeof g["class"]&&(g["class"]=""),g["class"]+=" views-rows",c=
"<div "+drupalgap_attributes(g)+">",d="</div>",f=e=""}b.open=c;b.close=d;b.open_row=e;b.close_row=f;return b}catch(h){console.log("drupalgap_views_get_result_formats - "+h)}}
function drupalgap_views_render_rows(a,b,c,d,e,f){try{var g="",h;for(h in b[c])if(b[c].hasOwnProperty(h)){var k=b[c][h][d];k._position=h;var m="";a.row_callback&&function_exists(a.row_callback)?(row_callback=window[a.row_callback],m=row_callback(b.view,k)):m=JSON.stringify(k);g+=e+m+f}return g}catch(n){console.log("drupalgap_views_render_rows - "+n)}}
drupalgap.views_datasource={options:{},call:function(a){try{console.log("WARNING: drupalgap.views_datasource has been deprecated! Use views_datasource_get_view_result() instead."),views_datasource_get_view_result(a.path,a)}catch(b){console.log("drupalgap.views_datasource - "+b)}}};
